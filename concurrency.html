<html><head><style>blockquote pre.programlisting { margin-left: 1em; padding-left: 1em; }
div.table { text-align: center; }
.sidebar { background-color: #e0e0e0; font-style: italic; }
p.tablecaption { font-weight: bold; }
table { margin: auto; border: 1px solid gray; border-collapse: collapse; }
th { border: 1px solid gray; }
td { border: 1px solid gray; }
h1, h2, h3, h4, h5, div.titlepage { page-break-after: avoid; }
</style><meta http-equiv="Content-Type" content="text/html; charset=US-ASCII"><title>Executors Proposal</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><pre>Doc. no:  D????  (as of commit a99766d98ca0d304e2d7be575a16844aeb54818d)
Date:     2014-??-??
Reply-To: Christopher Kohlhoff &lt;chris@kohlhoff.com&gt;
</pre>
<div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="concurrency"></a>Executors Proposal</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#concurrency.overview">1. Overview</a></span></dt><dt><span class="section"><a href="#concurrency.motivation_and_scope">2. Motivation and Scope</a></span></dt><dd><dl><dt><span class="section"><a href="#concurrency.reference_implementation">2.1. Reference Implementation</a></span></dt><dt><span class="section"><a href="#concurrency.related_work">2.2. Related Work</a></span></dt></dl></dd><dt><span class="section"><a href="#concurrency.impact_on_the_standard">3. Impact On the Standard</a></span></dt><dt><span class="section"><a href="#concurrency.design_decisions">4. Design Decisions</a></span></dt><dt><span class="section"><a href="#concurrency.proposed_text_for_the_standard">5. Proposed Text for the Standard</a></span></dt><dd><dl><dt><span class="section"><a href="#headers.header____experimental_type_traits___synopsis">5.1. Header <code class="literal">&lt;experimental/type_traits&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.handler_type">5.2. Class template <code class="literal">handler_type</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__handler_type__members">5.2.1. <code class="literal">handler_type</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.async_result">5.3. Class template <code class="literal">async_result</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__async_result__members">5.3.1. <code class="literal">async_result</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.async_completion">5.4. Class template <code class="literal">async_completion</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__async_completion__members">5.4.1. <code class="literal">async_completion</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#headers.header____experimental_memory___synopsis">5.5. Header <code class="literal">&lt;experimental/memory&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.associated_allocator">5.6. Class template <code class="literal">associated_allocator</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__associated_allocator__members">5.6.1. <code class="literal">associated_allocator</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#functions.get_associated_allocator">5.7. Function <code class="literal">get_associated_allocator</code></a></span></dt><dt><span class="section"><a href="#headers.header____experimental_executor___synopsis">5.8. Header <code class="literal">&lt;experimental/executor&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#concurrency.async_requirements">5.9. Requirements</a></span></dt><dd><dl><dt><span class="section"><a href="#requirements.executor">5.9.1. Executor requirements</a></span></dt><dt><span class="section"><a href="#requirements.service">5.9.2. Service requirements</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.execution_context">5.10. Class <code class="literal">execution_context</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__execution_context__constructor">5.10.1. <code class="literal">execution_context</code> constructor</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__destructor">5.10.2. <code class="literal">execution_context</code> destructor</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__operations">5.10.3. <code class="literal">execution_context</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__protected_operations">5.10.4. <code class="literal">execution_context</code> protected operations</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__globals">5.10.5. <code class="literal">execution_context</code> globals</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.execution_context__service">5.11. Class <code class="literal">execution_context::service</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__execution_context__service__constructors">5.11.1. <code class="literal">execution_context::service</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__service__observers">5.11.2. <code class="literal">execution_context::service</code> observers</a></span></dt><dt><span class="section"><a href="#classes.__execution_context__service__operations">5.11.3. <code class="literal">execution_context::service</code> operations</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.is_executor">5.12. Class template <code class="literal">is_executor</code></a></span></dt><dt><span class="section"><a href="#classes.executor_arg_t">5.13. Executor argument tag</a></span></dt><dt><span class="section"><a href="#classes.uses_executor">5.14. <code class="literal">uses_executor</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__uses_executor__trait">5.14.1. <code class="literal">uses_executor</code> trait</a></span></dt><dt><span class="section"><a href="#classes.uses_executor_construction">5.14.2. uses-executor construction</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.associated_executor">5.15. Class template <code class="literal">associated_executor</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__associated_executor__members">5.15.1. <code class="literal">associated_executor</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#functions.get_associated_executor">5.16. Function <code class="literal">get_associated_executor</code></a></span></dt><dt><span class="section"><a href="#classes.executor_wrapper">5.17. Class template <code class="literal">executor_wrapper</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__executor_wrapper__constructors">5.17.1. <code class="literal">executor_wrapper</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__executor_wrapper__access">5.17.2. <code class="literal">executor_wrapper</code> access</a></span></dt><dt><span class="section"><a href="#classes.__executor_wrapper__invocation">5.17.3. <code class="literal">executor_wrapper</code> invocation</a></span></dt><dt><span class="section"><a href="#classes.class_template_specialization___async_result_">5.17.4. Class template specialization <code class="literal">async_result</code></a></span></dt><dt><span class="section"><a href="#classes.class_template_specialization___associated_allocator_">5.17.5. Class template specialization <code class="literal">associated_allocator</code></a></span></dt><dt><span class="section"><a href="#classes.class_template_specialization___associated_executor_">5.17.6. Class template specialization <code class="literal">associated_executor</code></a></span></dt></dl></dd><dt><span class="section"><a href="#functions.wrap">5.18. Function <code class="literal">wrap</code></a></span></dt><dt><span class="section"><a href="#classes.executor_work">5.19. Class template <code class="literal">executor_work</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__executor_work__constructors">5.19.1. <code class="literal">executor_work</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__executor_work__destructor">5.19.2. <code class="literal">executor_work</code> destructor</a></span></dt><dt><span class="section"><a href="#classes.__executor_work__observers">5.19.3. <code class="literal">executor_work</code> observers</a></span></dt><dt><span class="section"><a href="#classes.__executor_work__modifiers">5.19.4. <code class="literal">executor_work</code> modifiers</a></span></dt></dl></dd><dt><span class="section"><a href="#functions.make_work">5.20. Function <code class="literal">make_work</code></a></span></dt><dt><span class="section"><a href="#classes.system_executor">5.21. Class <code class="literal">system_executor</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__system_executor__operations">5.21.1. <code class="literal">system_executor</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__system_executor__comparisons">5.21.2. <code class="literal">system_executor</code> comparisons</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.bad_executor">5.22. Class <code class="literal">bad_executor</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__bad_executor__constructor">5.22.1. <code class="literal">bad_executor</code> constructor</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.executor">5.23. Class <code class="literal">executor</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__executor__constructors">5.23.1. <code class="literal">executor</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__executor__assignment">5.23.2. <code class="literal">executor</code> assignment</a></span></dt><dt><span class="section"><a href="#classes.__executor__destructor">5.23.3. <code class="literal">executor</code> destructor</a></span></dt><dt><span class="section"><a href="#classes.__executor__modifiers">5.23.4. <code class="literal">executor</code> modifiers</a></span></dt><dt><span class="section"><a href="#classes.__executor__operations">5.23.5. <code class="literal">executor</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__executor__capacity">5.23.6. <code class="literal">executor</code> capacity</a></span></dt><dt><span class="section"><a href="#classes.__executor__target_access">5.23.7. <code class="literal">executor</code> target access</a></span></dt><dt><span class="section"><a href="#classes.__executor__comparisons">5.23.8. <code class="literal">executor</code> comparisons</a></span></dt><dt><span class="section"><a href="#classes.__executor__specialized_algorithms">5.23.9. <code class="literal">executor</code> specialized algorithms</a></span></dt></dl></dd><dt><span class="section"><a href="#functions.dispatch">5.24. Function <code class="literal">dispatch</code></a></span></dt><dt><span class="section"><a href="#functions.post">5.25. Function <code class="literal">post</code></a></span></dt><dt><span class="section"><a href="#functions.defer">5.26. Function <code class="literal">defer</code></a></span></dt><dt><span class="section"><a href="#headers.header____experimental_strand___synopsis">5.27. Header <code class="literal">&lt;experimental/strand&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.strand">5.28. Class template <code class="literal">strand</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__strand__constructors">5.28.1. <code class="literal">strand</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__strand__assignment">5.28.2. <code class="literal">strand</code> assignment</a></span></dt><dt><span class="section"><a href="#classes.__strand__destructor">5.28.3. <code class="literal">strand</code> destructor</a></span></dt><dt><span class="section"><a href="#classes.__strand__operations">5.28.4. <code class="literal">strand</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__strand__comparisons">5.28.5. <code class="literal">strand</code> comparisons</a></span></dt></dl></dd><dt><span class="section"><a href="#headers.header____experimental_timer___synopsis">5.29. Header <code class="literal">&lt;experimental/timer&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#functions.dispatch_at">5.30. Function <code class="literal">dispatch_at</code></a></span></dt><dt><span class="section"><a href="#functions.post_at">5.31. Function <code class="literal">post_at</code></a></span></dt><dt><span class="section"><a href="#functions.defer_at">5.32. Function <code class="literal">defer_at</code></a></span></dt><dt><span class="section"><a href="#functions.dispatch_after">5.33. Function <code class="literal">dispatch_after</code></a></span></dt><dt><span class="section"><a href="#functions.post_after">5.34. Function <code class="literal">post_after</code></a></span></dt><dt><span class="section"><a href="#functions.defer_after">5.35. Function <code class="literal">defer_after</code></a></span></dt><dt><span class="section"><a href="#headers.header____experimental_future___synopsis">5.36. Header <code class="literal">&lt;experimental/future&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.async_result_packaged_task">5.37. Class template specialization <code class="literal">async_result</code> for <code class="literal">packaged_task</code></a></span></dt><dt><span class="section"><a href="#classes.packaged_handler">5.38. Class template <code class="literal">packaged_handler</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__packaged_handler__constructors">5.38.1. <code class="literal">packaged_handler</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__packaged_handler__operations">5.38.2. <code class="literal">packaged_handler</code> operations</a></span></dt><dt><span class="section"><a href="#classes.async_result_packaged_handler">5.38.3. Class template specialization <code class="literal">async_result</code></a></span></dt></dl></dd><dt><span class="section"><a href="#classes.packaged_token">5.39. Class template <code class="literal">packaged_token</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__packaged_token__constructors">5.39.1. <code class="literal">packaged_token</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__packaged_token__operations">5.39.2. <code class="literal">packaged_token</code> operations</a></span></dt></dl></dd><dt><span class="section"><a href="#functions.package">5.40. Function <code class="literal">package</code></a></span></dt><dt><span class="section"><a href="#headers.header____experimental_thread_pool___synopsis">5.41. Header <code class="literal">&lt;experimental/thread_pool&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.thread_pool">5.42. Class <code class="literal">thread_pool</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__thread_pool__constructors_destructor">5.42.1. <code class="literal">thread_pool</code> constructors/destructor</a></span></dt><dt><span class="section"><a href="#classes.__thread_pool__members">5.42.2. <code class="literal">thread_pool</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.thread_pool__executor_type">5.43. Class <code class="literal">thread_pool::executor_type</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__thread_pool__executor_type__constructors">5.43.1. <code class="literal">thread_pool::executor_type</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__thread_pool__executor_type__assignment">5.43.2. <code class="literal">thread_pool::executor_type</code> assignment</a></span></dt><dt><span class="section"><a href="#classes.__thread_pool__executor_type__operations">5.43.3. <code class="literal">thread_pool::executor_type</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__thread_pool__executor_type__comparisons">5.43.4. <code class="literal">thread_pool::executor_type</code> comparisons</a></span></dt></dl></dd><dt><span class="section"><a href="#headers.header____experimental_loop_scheduler___synopsis">5.44. Header <code class="literal">&lt;experimental/loop_scheduler&gt;</code> synopsis</a></span></dt><dt><span class="section"><a href="#classes.loop_scheduler">5.45. Class <code class="literal">loop_scheduler</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__loop_scheduler__constructors_destructor">5.45.1. <code class="literal">loop_scheduler</code> constructors/destructor</a></span></dt><dt><span class="section"><a href="#classes.__loop_scheduler__members">5.45.2. <code class="literal">loop_scheduler</code> members</a></span></dt></dl></dd><dt><span class="section"><a href="#classes.loop_scheduler__executor_type">5.46. Class <code class="literal">loop_scheduler::executor_type</code></a></span></dt><dd><dl><dt><span class="section"><a href="#classes.__loop_scheduler__executor_type__constructors">5.46.1. <code class="literal">loop_scheduler::executor_type</code> constructors</a></span></dt><dt><span class="section"><a href="#classes.__loop_scheduler__executor_type__assignment">5.46.2. <code class="literal">loop_scheduler::executor_type</code> assignment</a></span></dt><dt><span class="section"><a href="#classes.__loop_scheduler__executor_type__operations">5.46.3. <code class="literal">loop_scheduler::executor_type</code> operations</a></span></dt><dt><span class="section"><a href="#classes.__loop_scheduler__executor_type__comparisons">5.46.4. <code class="literal">loop_scheduler::executor_type</code> comparisons</a></span></dt></dl></dd></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrency.overview"></a>1.&#160;Overview</h2></div></div></div><p>
      TBD.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrency.motivation_and_scope"></a>2.&#160;Motivation and Scope</h2></div></div></div><p>
      TBD.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="concurrency.reference_implementation"></a>2.1.&#160;Reference Implementation</h3></div></div></div><p>
        TBD.
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="concurrency.related_work"></a>2.2.&#160;Related Work</h3></div></div></div><p>
        TBD.
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrency.impact_on_the_standard"></a>3.&#160;Impact On the Standard</h2></div></div></div><p>
      This is a pure library proposal. It does not add any new language features,
      nor does it alter any existing standard library headers.
    </p><p>
      This library can be implemented using compilers that conform to the C++14 standard.
      An implementation of this library requires operating system-specific functions
      that lie outside the C++14 standard.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrency.design_decisions"></a>4.&#160;Design Decisions</h2></div></div></div><p>
      TBD.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="concurrency.proposed_text_for_the_standard"></a>5.&#160;Proposed Text for the Standard</h2></div></div></div><div class="sidebar"><div class="titlepage"></div><p>
      Grey-shaded italic text is commentary on the proposal. It is not to be added
      to the TS.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_type_traits___synopsis"></a>5.1.&#160;Header <code class="literal">&lt;experimental/type_traits&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="special">=</span> <span class="keyword">void</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <a class="link" href="#classes.handler_type" title="5.2.&#160;Class template handler_type">handler_type</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
        <span class="keyword">using</span> <span class="identifier">handler_type_t</span> <span class="special">=</span>
          <span class="keyword">typename</span> <span class="identifier">handler_type</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span> <span class="identifier">Signature</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Handler</span><span class="special">&gt;</span> <span class="keyword">class</span> <a class="link" href="#classes.async_result" title="5.3.&#160;Class template async_result">async_result</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <a class="link" href="#classes.async_completion" title="5.4.&#160;Class template async_completion">async_completion</a><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.handler_type"></a>5.2.&#160;Class template <code class="literal">handler_type</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="special">=</span> <span class="keyword">void</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">handler_type</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Template parameter <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
        specifies the model used to obtain the result of the asynchronous operation.
        Template parameter <code class="computeroutput"><span class="identifier">Signature</span></code>
        is the call signature (C++ Std, [func.def]) for the handler type invoked
        on completion of the asynchronous operation.
      </p><p>
        A program may specialize this trait if the <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
        template parameter in the specialization is a user-defined type.
      </p><p>
        Specializations of <code class="computeroutput"><span class="identifier">handler_type</span></code>
        shall define a nested handler type <code class="computeroutput"><span class="identifier">type</span></code>
        that satisfies the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
        requirements, and objects of type <code class="computeroutput"><span class="identifier">type</span></code>
        shall be constructible from an lvalue or rvalue of the type specified by
        the <code class="computeroutput"><span class="identifier">CompletionToken</span></code> template
        parameter.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__handler_type__members"></a>5.2.1.&#160;<code class="literal">handler_type</code> members</h4></div></div></div><pre class="programlisting"><span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Type:</em></span> <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
            if <code class="computeroutput"><span class="identifier">CompletionToken</span></code> and
            <code class="computeroutput"><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;</span></code>
            are the same type; otherwise, <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;,</span> <span class="identifier">Signature</span><span class="special">&gt;</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.async_result"></a>5.3.&#160;Class template <code class="literal">async_result</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Handler</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">async_result</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">typedef</span> <span class="keyword">void</span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">Handler</span><span class="special">&amp;);</span>
        <span class="identifier">async_result</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">async_result</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

        <span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Template argument <code class="computeroutput"><span class="identifier">Handler</span></code>
        is a handler type produced by <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span>
        <span class="identifier">S</span><span class="special">&gt;</span></code>
        for some completion token type <code class="computeroutput"><span class="identifier">T</span></code>
        and call signature <code class="computeroutput"><span class="identifier">S</span></code>.
      </p><p>
        A program may specialize this template if the <code class="computeroutput"><span class="identifier">Handler</span></code>
        template parameter in the specialization is a user-defined type.
      </p><p>
        Specializations of <code class="computeroutput"><span class="identifier">async_result</span></code>
        shall satisfy the <code class="computeroutput"><span class="identifier">Destructible</span></code>
        requirements (C++ Std, [destructible]) in addition to the requirements in
        the table below. In this table, <code class="computeroutput"><span class="identifier">R</span></code>
        is a specialization of <code class="computeroutput"><span class="identifier">async_result</span></code>
        for the template parameter <code class="computeroutput"><span class="identifier">Handler</span></code>;
        <code class="computeroutput"><span class="identifier">r</span></code> is a modifiable lvalue
        of type <code class="computeroutput"><span class="identifier">R</span></code>; and <code class="computeroutput"><span class="identifier">h</span></code> is a modifiable lvalue of type <code class="computeroutput"><span class="identifier">Handler</span></code>.
      </p><div class="table"><a name="idm305330765776"></a><p class="title"><b>Table&#160;1.&#160;async_result specialization requirements</b></p><div class="table-contents"><table class="table" summary="async_result specialization requirements"><colgroup><col><col><col></colgroup><thead><tr><th>
                <p>
                  Expression
                </p>
              </th><th>
                <p>
                  Return type
                </p>
              </th><th>
                <p>
                  Note
                </p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">R</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="keyword">void</span></code>; or a type satisfying
                  <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
                  requirements (C++ Std, [moveconstructible])
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">R</span> <span class="identifier">r</span><span class="special">(</span><span class="identifier">h</span><span class="special">);</span></code>
                </p>
              </td><td>
              </td><td>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">r</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>
                </p>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="identifier">R</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  The <code class="computeroutput"><span class="identifier">get</span><span class="special">()</span></code>
                  member function shall be used only as a return expression.
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__async_result__members"></a>5.3.1.&#160;<code class="literal">async_result</code> members</h4></div></div></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">Handler</span><span class="special">&amp;);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Does nothing.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Does nothing.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.async_completion"></a>5.4.&#160;Class template <code class="literal">async_completion</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">async_completion</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span> <span class="identifier">Signature</span><span class="special">&gt;</span> <span class="identifier">handler_type</span><span class="special">;</span>

        <span class="keyword">explicit</span> <span class="identifier">async_completion</span><span class="special">(</span><span class="identifier">remove_reference_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
        <span class="identifier">async_completion</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">async_completion</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">async_completion</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">async_completion</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

        <span class="emphasis"><em>see below</em></span> <span class="identifier">handler</span><span class="special">;</span>
        <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">handler_type</span><span class="special">&gt;</span> <span class="identifier">result</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Template parameter <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
        specifies the model used to obtain the result of the asynchronous operation.
        Template parameter <code class="computeroutput"><span class="identifier">Signature</span></code>
        is the call signature (C++ Std, [func.def]) for the handler type invoked
        on completion of the asynchronous operation.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__async_completion__members"></a>5.4.1.&#160;<code class="literal">async_completion</code> members</h4></div></div></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">async_completion</span><span class="special">(</span><span class="identifier">remove_reference_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
            and <code class="computeroutput"><span class="identifier">handler_type</span></code> are
            the same type, binds <code class="computeroutput"><span class="identifier">handler</span></code>
            to <code class="computeroutput"><span class="identifier">t</span></code>; otherwise, initializes
            <code class="computeroutput"><span class="identifier">handler</span></code> with the result
            of <code class="computeroutput"><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">t</span><span class="special">)</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">result</span></code> with
            <code class="computeroutput"><span class="identifier">handler</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="emphasis"><em>see below</em></span> <span class="identifier">handler</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Type:</em></span> <code class="computeroutput"><span class="identifier">handler_type</span><span class="special">&amp;</span></code> if <code class="computeroutput"><span class="identifier">CompletionToken</span></code>
            and <code class="computeroutput"><span class="identifier">handler_type</span></code> are
            the same type; otherwise, <code class="computeroutput"><span class="identifier">handler_type</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_memory___synopsis"></a>5.5.&#160;Header <code class="literal">&lt;experimental/memory&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
        <span class="keyword">struct</span> <a class="link" href="#classes.associated_allocator" title="5.6.&#160;Class template associated_allocator">associated_allocator</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
        <span class="keyword">using</span> <span class="identifier">associated_allocator_t</span> <span class="special">=</span> <span class="keyword">typename</span> <span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">;</span>

      // <a class="link" href="#functions.get_associated_allocator" title="5.7.&#160;Function get_associated_allocator">get_associated_allocator</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">associated_allocator_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
        <span class="identifier">associated_allocator_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.associated_allocator"></a>5.6.&#160;Class template <code class="literal">associated_allocator</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">associated_allocator</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        A program may specialize this traits type if the <code class="computeroutput"><span class="identifier">T</span></code>
        template parameter in the specialization is a user-defined type. The template
        parameter <code class="computeroutput"><span class="identifier">Alloc</span></code> shall be
        a type meeting <code class="computeroutput"><span class="identifier">Allocator</span></code>
        requirements (C++ Std, [allocator.requirements]).
      </p><p>
        Specializations of <code class="computeroutput"><span class="identifier">associated_allocator</span></code>
        shall satisfy the requirements in the table below. In this table, <code class="computeroutput"><span class="identifier">X</span></code> is a specialization of <code class="computeroutput"><span class="identifier">associated_allocator</span></code> for the template parameter
        <code class="computeroutput"><span class="identifier">T</span></code>; <code class="computeroutput"><span class="identifier">t</span></code>
        is a const reference to an object of type <code class="computeroutput"><span class="identifier">T</span></code>;
        and <code class="computeroutput"><span class="identifier">a</span></code> is an object of type
        <code class="computeroutput"><span class="identifier">Alloc</span></code>.
      </p><div class="table"><a name="idm305330570016"></a><p class="title"><b>Table&#160;2.&#160;associated_allocator specialization requirements</b></p><div class="table-contents"><table class="table" summary="associated_allocator specialization requirements"><colgroup><col><col><col></colgroup><thead><tr><th>
                <p>
                  Expression
                </p>
              </th><th>
                <p>
                  Return type
                </p>
              </th><th>
                <p>
                  Note
                </p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="computeroutput"><span class="keyword">typename</span> <span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  A type meeting <code class="computeroutput"><span class="identifier">Allocator</span></code>
                  requirements (C++ Std, [allocator.requirements]).
                </p>
              </td><td>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code>
                </p>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  Shall not exit via an exception.<br> Equivalent to <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
                  <span class="identifier">Alloc</span><span class="special">())</span></code>.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
                  <span class="identifier">a</span><span class="special">)</span></code>
                </p>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  Shall not exit via an exception.
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__associated_allocator__members"></a>5.6.1.&#160;<code class="literal">associated_allocator</code> members</h4></div></div></div><pre class="programlisting"><span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Type:</em></span> If <code class="computeroutput"><span class="identifier">T</span></code>
            has a nested type <code class="computeroutput"><span class="identifier">allocator_type</span></code>,
            <code class="computeroutput"><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">::</span><span class="identifier">allocator_type</span></code>.
            Otherwise <code class="computeroutput"><span class="identifier">Alloc</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> If <code class="computeroutput"><span class="identifier">T</span></code>
            has a nested type <code class="computeroutput"><span class="identifier">allocator_type</span></code>,
            <code class="computeroutput"><span class="identifier">t</span><span class="special">.</span><span class="identifier">get_allocator</span><span class="special">()</span></code>.
            Otherwise <code class="computeroutput"><span class="identifier">a</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.get_associated_allocator"></a>5.7.&#160;Function <code class="literal">get_associated_allocator</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">associated_allocator_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="identifier">associated_allocator_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
    <span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
          <span class="identifier">a</span><span class="special">)</span></code>.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_executor___synopsis"></a>5.8.&#160;Header <code class="literal">&lt;experimental/executor&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">enum</span> <span class="keyword">class</span> <span class="identifier">fork_event</span> <span class="special">{</span>
        <span class="identifier">prepare</span><span class="special">,</span>
        <span class="identifier">parent</span><span class="special">,</span>
        <span class="identifier">child</span>
      <span class="special">};</span>

      <span class="keyword">class</span> <a class="link" href="#classes.execution_context" title="5.10.&#160;Class execution_context">execution_context</a><span class="special">;</span>

      <span class="keyword">class</span> <span class="identifier">service_already_exists</span><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span> <span class="identifier">use_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span>
        <span class="identifier">make_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="identifier">has_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">struct</span> <a class="link" href="#classes.is_executor" title="5.12.&#160;Class template is_executor">is_executor</a> <span class="special">:</span> <span class="identifier">false_type</span> <span class="special">{};</span>

      <span class="keyword">struct</span> <a class="link" href="#classes.executor_arg_t" title="5.13.&#160;Executor argument tag">executor_arg_t</a> <span class="special">{</span> <span class="special">};</span>
      <span class="identifier">constexpr</span> <span class="identifier">executor_arg_t</span> <span class="identifier">executor_arg</span> <span class="special">=</span> <span class="identifier">executor_arg_t</span><span class="special">();</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">struct</span> <a class="link" href="#classes.uses_executor" title="5.14.&#160;uses_executor">uses_executor</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span> <span class="special">=</span> <span class="identifier">system_executor</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <a class="link" href="#classes.associated_executor" title="5.15.&#160;Class template associated_executor">associated_executor</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span> <span class="special">=</span> <span class="identifier">system_executor</span><span class="special">&gt;</span>
        <span class="keyword">using</span> <span class="identifier">associated_executor_t</span> <span class="special">=</span> <span class="keyword">typename</span> <span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">type</span><span class="special">;</span>

      // <a class="link" href="#functions.get_associated_executor" title="5.16.&#160;Function get_associated_executor">get_associated_executor</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
          <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
        <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
          <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">struct</span> <a class="link" href="#classes.executor_wrapper" title="5.17.&#160;Class template executor_wrapper">executor_wrapper</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">handler_type</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Signature</span><span class="special">&gt;;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Allocator</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Allocator</span><span class="special">&gt;;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor1</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Executor1</span><span class="special">&gt;;</span>

      // <a class="link" href="#functions.wrap" title="5.18.&#160;Function wrap">wrap</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">wrap</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
          <span class="identifier">wrap</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">t</span><span class="special">);</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">struct</span> <a class="link" href="#classes.executor_work" title="5.19.&#160;Class template executor_work">executor_work</a><span class="special">;</span>

      // <a class="link" href="#functions.make_work" title="5.20.&#160;Function make_work">make_work</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span>
          <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
        <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
          <span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
        <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;&gt;</span>
          <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;</span>
          <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
        <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;&gt;</span>
          <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>

      <span class="keyword">class</span> <a class="link" href="#classes.system_executor" title="5.21.&#160;Class system_executor">system_executor</a><span class="special">;</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;);</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;);</span>

      <span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">system_executor</span><span class="special">&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

      <span class="keyword">class</span> <a class="link" href="#classes.bad_executor" title="5.22.&#160;Class bad_executor">bad_executor</a><span class="special">;</span>

      <span class="keyword">class</span> <a class="link" href="#classes.executor" title="5.23.&#160;Class executor">executor</a><span class="special">;</span>

      <span class="keyword">template</span> <span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">executor</span><span class="special">&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

      // <a class="link" href="#functions.dispatch" title="5.24.&#160;Function dispatch">dispatch</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>

      // <a class="link" href="#functions.post" title="5.25.&#160;Function post">post</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>

      // <a class="link" href="#functions.defer" title="5.26.&#160;Function defer">defer</a>:

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
        <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">uses_allocator</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">executor</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="concurrency.async_requirements"></a>5.9.&#160;Requirements</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="requirements.executor"></a>5.9.1.&#160;Executor requirements</h4></div></div></div><p>
          The library describes a standard set of requirements for <span class="emphasis"><em>executors</em></span>.
          A type meeting Executor requirements shall embody a set of rules for determining
          how submitted function objects are to be executed.
        </p><p>
          An executor type <code class="computeroutput"><span class="identifier">X</span></code> shall
          satisfy the requirements of <code class="computeroutput"><span class="identifier">CopyConstructible</span></code>
          (C++ Std, [copyconstructible]) types. No constructor, comparison operator,
          copy operation, move operation, swap operation, or member functions <code class="computeroutput"><span class="identifier">context</span></code>, <code class="computeroutput"><span class="identifier">on_work_started</span></code>
          and <code class="computeroutput"><span class="identifier">on_work_finished</span></code> on
          these types shall exit via an exception.
        </p><p>
          The executor copy constructor, comparison operators, and member functions
          defined in these requirements shall not introduce data races as a result
          of concurrent calls to those functions from different threads.
        </p><p>
          In the table below, <code class="computeroutput"><span class="identifier">X</span></code> denotes
          an executor class, <code class="computeroutput"><span class="identifier">x</span></code> denotes
          a value of type <code class="computeroutput"><span class="identifier">X</span><span class="special">&amp;</span></code>,
          <code class="computeroutput"><span class="identifier">x1</span></code> and <code class="computeroutput"><span class="identifier">x2</span></code>
          denote values of type <code class="computeroutput"><span class="keyword">const</span> <span class="identifier">X</span><span class="special">&amp;</span></code>,
          <code class="computeroutput"><span class="identifier">x3</span></code> denotes a value of type
          <code class="computeroutput"><span class="identifier">X</span><span class="special">&amp;&amp;</span></code>,
          <code class="computeroutput"><span class="identifier">f</span></code> denotes a <code class="computeroutput"><span class="identifier">MoveConstructible</span></code> (C++ Std, [moveconstructible])
          function object callable with zero arguments, <code class="computeroutput"><span class="identifier">a</span></code>
          denotes a value of type <code class="computeroutput"><span class="identifier">A</span></code>
          meeting <code class="computeroutput"><span class="identifier">Allocator</span></code> requirements
          (C++ Std, [allocator.requirements]), <code class="computeroutput"><span class="identifier">t</span></code>
          denotes an object of type <code class="computeroutput"><span class="identifier">T</span></code>,
          and <code class="computeroutput"><span class="identifier">u</span></code> denotes an identifier.
        </p><div class="table"><a name="idm305329980496"></a><p class="title"><b>Table&#160;3.&#160;Executor requirements</b></p><div class="table-contents"><table class="table" summary="Executor requirements"><colgroup><col><col><col></colgroup><thead><tr><th>
                  <p>
                    expression
                  </p>
                </th><th>
                  <p>
                    type
                  </p>
                </th><th>
                  <p>
                    assertion/note<br> pre/post-conditions
                  </p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">X</span> <span class="identifier">u</span><span class="special">(</span><span class="identifier">x1</span><span class="special">);</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Shall not exit via an exception.<br> <br> post: <code class="computeroutput"><span class="identifier">u</span> <span class="special">==</span>
                    <span class="identifier">x1</span></code>
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">X</span> <span class="identifier">u</span><span class="special">(</span><span class="identifier">x3</span><span class="special">);</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Shall not exit via an exception.<br> <br> post: <code class="computeroutput"><span class="identifier">u</span></code> equals the prior value of
                    <code class="computeroutput"><span class="identifier">x3</span></code>.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x1</span> <span class="special">==</span>
                    <span class="identifier">x2</span></code>
                  </p>
                </td><td>
                  <p>
                    <code class="computeroutput"><span class="keyword">bool</span></code>
                  </p>
                </td><td>
                  <p>
                    Shall not exit via an exception.<br> <br> Returns <code class="computeroutput"><span class="keyword">true</span></code> only if <code class="computeroutput"><span class="identifier">x1</span></code>
                    and <code class="computeroutput"><span class="identifier">x2</span></code> can be
                    interchanged with identical effects in any of the expressions
                    defined in these type requirements. [<span class="emphasis"><em>Note:</em></span>
                    <code class="computeroutput"><span class="keyword">false</span></code> does not necessarily
                    imply that the effects are not identical. &#8212;<span class="emphasis"><em>end note</em></span>]
                    <br> <br> <code class="computeroutput"><span class="keyword">operator</span><span class="special">==</span></code> shall be reflexive, symmetric,
                    and transitive, and shall not exit via an exception.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x1</span> <span class="special">!=</span>
                    <span class="identifier">x2</span></code>
                  </p>
                </td><td>
                  <p>
                    <code class="computeroutput"><span class="keyword">bool</span></code>
                  </p>
                </td><td>
                  <p>
                    Shall not exit via an exception.<br> <br> Same as <code class="computeroutput"><span class="special">!(</span><span class="identifier">x1</span>
                    <span class="special">==</span> <span class="identifier">x2</span><span class="special">)</span></code>.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span></code>
                  </p>
                </td><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">&amp;</span></code>, or a type that is convertible
                    to <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">&amp;</span></code>.
                  </p>
                </td><td>
                  <p>
                    Shall not exit via an exception.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Shall not exit via an exception.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">on_work_finished</span><span class="special">()</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Shall not exit via an exception.<br> <br> Requires: A preceding
                    call <code class="computeroutput"><span class="identifier">x1</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>
                    where <code class="computeroutput"><span class="identifier">x</span> <span class="special">==</span>
                    <span class="identifier">x1</span></code>.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span><span class="identifier">a</span><span class="special">)</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Effects: Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> at most once. The executor
                    may invoke <code class="computeroutput"><span class="identifier">f</span></code>
                    in the current thread, prior to returning from <code class="computeroutput"><span class="identifier">dispatch</span></code>. The call to <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">()</span></code>
                    is evaluated in the thread that called <code class="computeroutput"><span class="identifier">dispatch</span></code>.<br>
                    <br> Executor implementations are encouraged to use the supplied
                    allocator to allocate any memory required to store the function
                    object. The executor shall deallocate all memory prior to invoking
                    the function object.<br> <br> Synchronization: The invocation
                    of <code class="computeroutput"><span class="identifier">dispatch</span></code> synchronizes
                    with (C++ Std, [intro.multithread]) the invocation of <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span><span class="identifier">a</span><span class="special">)</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Effects: Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> at most once. The executor
                    may not invoke <code class="computeroutput"><span class="identifier">f</span></code>
                    in the current thread, prior to returning from <code class="computeroutput"><span class="identifier">post</span></code>. The call to <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">()</span></code>
                    is evaluated in the thread that called <code class="computeroutput"><span class="identifier">post</span></code>.<br>
                    <br> Executor implementations are encouraged to use the supplied
                    allocator to allocate any memory required to store the function
                    object. The executor shall deallocate all memory prior to invoking
                    the function object.<br> <br> Synchronization: The invocation
                    of <code class="computeroutput"><span class="identifier">post</span></code> synchronizes
                    with (C++ Std, [intro.multithread]) the invocation of <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p>
                </td></tr><tr><td>
                  <p>
                    <code class="computeroutput"><span class="identifier">x</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span><span class="identifier">a</span><span class="special">)</span></code>
                  </p>
                </td><td>
                </td><td>
                  <p>
                    Effects: Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> at most once. The executor
                    may not invoke <code class="computeroutput"><span class="identifier">f</span></code>
                    in the current thread, prior to returning from <code class="computeroutput"><span class="identifier">defer</span></code>. The call to <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">()</span></code>
                    is evaluated in the thread that called <code class="computeroutput"><span class="identifier">defer</span></code>.<br>
                    <br> Executor implementations are encouraged to use the supplied
                    allocator to allocate any memory required to store the function
                    object. The executor shall deallocate all memory prior to invoking
                    the function object.<br> <br> Synchronization: The invocation
                    of <code class="computeroutput"><span class="identifier">defer</span></code> synchronizes
                    with (C++ Std, [intro.multithread]) the invocation of <code class="computeroutput"><span class="identifier">f</span></code>.
                  </p>
                </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="requirements.service"></a>5.9.2.&#160;Service requirements</h4></div></div></div><p>
          A class is a service if it is publicly derived from another service, or
          if it is a class publicly derived from <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code>.
        </p><p>
          A service may contain a publicly-accessible nested typedef named <code class="computeroutput"><span class="identifier">key_type</span></code>. If the nested typedef <code class="computeroutput"><span class="identifier">key_type</span></code> exists, the service class shall
          be the same type as <code class="computeroutput"><span class="identifier">key_type</span></code>,
          or otherwise publicly and unambiguously derived from <code class="computeroutput"><span class="identifier">key_type</span></code>.
        </p><p>
          All services define a one-argument constructor that takes a reference to
          the <code class="computeroutput"><span class="identifier">execution_context</span></code> object
          that owns the service. This constructor is <span class="emphasis"><em>explicit</em></span>,
          preventing its participation in automatic conversions.
        </p><p>
          A service may provide additional constructors with two or more arguments,
          where the first argument is a reference to the <code class="computeroutput"><span class="identifier">execution_context</span></code>
          object that owns the service. [<span class="emphasis"><em>Note:</em></span> These constructors
          may be called by the <code class="computeroutput"><span class="identifier">make_service</span></code>
          function. &#8212;<span class="emphasis"><em>end note</em></span>]
        </p><p>
          [<span class="emphasis"><em>Example:</em></span> <br>
        </p><p>
          
</p><pre class="programlisting"><span class="keyword">class</span> <span class="identifier">my_service</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="keyword">typedef</span> <span class="identifier">my_service</span> <span class="identifier">key_type</span><span class="special">;</span>
  <span class="keyword">explicit</span> <span class="identifier">my_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
<span class="keyword">private</span><span class="special">:</span>
  <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="identifier">shutdown_service</span><span class="special">();</span>
  ...
<span class="special">};</span>
</pre><p>
        </p><p>
          &#8212;<span class="emphasis"><em>end example</em></span>]
        </p><p>
          A service's <code class="computeroutput"><span class="identifier">shutdown_service</span></code>
          member function must cause all copies of user-defined function objects
          that are held by the service to be destroyed.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.execution_context"></a>5.10.&#160;Class <code class="literal">execution_context</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">execution_context</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">class</span> <a class="link" href="#classes.execution_context__service" title="5.11.&#160;Class execution_context::service">service</a><span class="special">;</span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">execution_context</span><span class="special">();</span>
        <span class="identifier">execution_context</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">execution_context</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">execution_context</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="keyword">virtual</span> <span class="special">~</span><span class="identifier">execution_context</span><span class="special">();</span>

        <span class="comment">// execution context operations:</span>

        <span class="keyword">void</span> <span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">fork_event</span> <span class="identifier">e</span><span class="special">);</span>

      <span class="keyword">protected</span><span class="special">:</span>

        <span class="comment">// execution context protected operations:</span>

        <span class="keyword">void</span> <span class="identifier">shutdown_context</span><span class="special">();</span>
        <span class="keyword">void</span> <span class="identifier">destroy_context</span><span class="special">();</span>
      <span class="special">};</span>

      <span class="comment">// service access:</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span> <span class="identifier">use_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span>
        <span class="identifier">make_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="identifier">has_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">class</span> <span class="identifier">service_already_exists</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">logic_error</span> <span class="special">{</span> <span class="special">...</span> <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Class <code class="computeroutput"><span class="identifier">execution_context</span></code> implements
        an extensible, type-safe, polymorphic set of services, indexed by service
        <span class="emphasis"><em>type</em></span>.
      </p><p>
        Access to the services of an <code class="computeroutput"><span class="identifier">execution_context</span></code>
        is via three function templates, <code class="computeroutput"><span class="identifier">use_service</span><span class="special">&lt;&gt;</span></code>, <code class="computeroutput"><span class="identifier">make_service</span><span class="special">&lt;&gt;</span></code> and <code class="computeroutput"><span class="identifier">has_service</span><span class="special">&lt;&gt;</span></code>.
      </p><p>
        In a call to <code class="computeroutput"><span class="identifier">use_service</span><span class="special">&lt;</span><span class="identifier">Service</span><span class="special">&gt;()</span></code>, the type argument chooses a service,
        making available all members of the named type. If the service is not present
        in an <code class="computeroutput"><span class="identifier">execution_context</span></code>,
        an object of type <code class="computeroutput"><span class="identifier">Service</span></code>
        is created and added to the <code class="computeroutput"><span class="identifier">execution_context</span></code>.
        A C++ program can check if an <code class="computeroutput"><span class="identifier">execution_context</span></code>
        implements a particular service with the function template <code class="computeroutput"><span class="identifier">has_service</span><span class="special">&lt;</span><span class="identifier">Service</span><span class="special">&gt;()</span></code>.
      </p><p>
        Service objects may be explicitly added to an <code class="computeroutput"><span class="identifier">execution_context</span></code>
        using the function template <code class="computeroutput"><span class="identifier">make_service</span><span class="special">&lt;</span><span class="identifier">Service</span><span class="special">&gt;()</span></code>. If the service is already present,
        the <code class="computeroutput"><span class="identifier">service_already_exists</span></code>
        exception is thrown.
      </p><p>
        Once a service reference is obtained from an <code class="computeroutput"><span class="identifier">execution_context</span></code>
        object by calling <code class="computeroutput"><span class="identifier">use_service</span><span class="special">&lt;&gt;</span></code>, that reference remains usable until
        a call to <code class="computeroutput"><span class="identifier">destroy_context</span><span class="special">()</span></code>.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__constructor"></a>5.10.1.&#160;<code class="literal">execution_context</code> constructor</h4></div></div></div><pre class="programlisting"><span class="identifier">execution_context</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Creates an object of class <code class="computeroutput"><span class="identifier">execution_context</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__destructor"></a>5.10.2.&#160;<code class="literal">execution_context</code> destructor</h4></div></div></div><pre class="programlisting"><span class="special">~</span><span class="identifier">execution_context</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Destroys an object of class <code class="computeroutput"><span class="identifier">execution_context</span></code>. Performs <code class="computeroutput"><span class="identifier">shutdown_context</span><span class="special">()</span></code>
            followed by <code class="computeroutput"><span class="identifier">destroy_context</span><span class="special">()</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__operations"></a>5.10.3.&#160;<code class="literal">execution_context</code> operations</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">fork_event</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> For each service object <code class="computeroutput"><span class="identifier">svc</span></code>
            in the set:<br> &#8212; If <code class="computeroutput"><span class="identifier">e</span> <span class="special">==</span> <span class="identifier">fork_event</span><span class="special">::</span><span class="identifier">prepare</span></code>,
            performs <code class="computeroutput"><span class="identifier">svc</span><span class="special">-&gt;</span><span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code>
            in reverse order of the beginning of service object lifetime (C++ Std,
            [basic.life]).<br> &#8212; Otherwise, performs <code class="computeroutput"><span class="identifier">svc</span><span class="special">-&gt;</span><span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code> in order of the beginning of service
            object lifetime.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__protected_operations"></a>5.10.4.&#160;<code class="literal">execution_context</code> protected operations</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">shutdown_context</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> For each service object <code class="computeroutput"><span class="identifier">svc</span></code>
            in the <code class="computeroutput"><span class="identifier">execution_context</span></code>
            set, in reverse order of the beginning of service object lifetime (C++
            Std, [basic.life]), performs <code class="computeroutput"><span class="identifier">svc</span><span class="special">-&gt;</span><span class="identifier">shutdown_service</span><span class="special">()</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            [<span class="emphasis"><em>Note:</em></span> <code class="computeroutput"><span class="identifier">shutdown_context</span></code>
            is an idempotent operation. &#8212;<span class="emphasis"><em>end note</em></span>]
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">destroy_context</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Destroys each service object in the <code class="computeroutput"><span class="identifier">execution_context</span></code> set, in reverse order
            of the beginning of service object lifetime (C++ Std, [basic.life]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            [<span class="emphasis"><em>Note:</em></span> <code class="computeroutput"><span class="identifier">destroy_context</span></code>
            is an idempotent operation. &#8212;<span class="emphasis"><em>end note</em></span>]
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">fork_event</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> For each service object <code class="computeroutput"><span class="identifier">svc</span></code>
            in the set:<br> &#8212; If <code class="computeroutput"><span class="identifier">e</span> <span class="special">==</span> <span class="identifier">fork_event</span><span class="special">::</span><span class="identifier">prepare</span></code>,
            performs <code class="computeroutput"><span class="identifier">svc</span><span class="special">-&gt;</span><span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code>
            in reverse order of the beginning of service object lifetime (C++ Std,
            [basic.life]).<br> &#8212; Otherwise, performs <code class="computeroutput"><span class="identifier">svc</span><span class="special">-&gt;</span><span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code> in order of the beginning of service
            object lifetime.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__globals"></a>5.10.5.&#160;<code class="literal">execution_context</code> globals</h4></div></div></div><p>
          The functions <code class="computeroutput"><span class="identifier">use_service</span></code>,
          <code class="computeroutput"><span class="identifier">make_service</span></code> and <code class="computeroutput"><span class="identifier">has_service</span></code> shall not introduce data
          races as a result of concurrent calls to those functions from different
          threads.
        </p><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span> <span class="identifier">use_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            Let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> if the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> exists; otherwise, let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Service</span></code>
            is a service class that is publicly and unambiguously derived from <a class="link" href="#classes.execution_context__service" title="5.11.&#160;Class execution_context::service"><code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code></a>.
            If the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>
            exists, <code class="computeroutput"><span class="identifier">Service</span></code> is the
            same type as <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            or <code class="computeroutput"><span class="identifier">Service</span></code> is publicly
            and unambiguously derived from <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            and <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> is publicly and unambiguously
            derived from <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If an object of type <code class="computeroutput"><span class="identifier">Key</span></code>
            does not already exist in the <code class="computeroutput"><span class="identifier">execution_context</span></code>
            set identified by <code class="computeroutput"><span class="identifier">ctx</span></code>,
            creates an object of type <code class="computeroutput"><span class="identifier">Service</span></code>,
            initializing it with <code class="computeroutput"><span class="identifier">Service</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">)</span></code>, and adds it to the set.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> A reference to the corresponding service
            of <code class="computeroutput"><span class="identifier">ctx</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Notes:</em></span> The reference returned remains valid until
            a call to <code class="computeroutput"><span class="identifier">destroy_context</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span> <span class="identifier">Service</span><span class="special">&amp;</span>
  <span class="identifier">make_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            Let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> if the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> exists; otherwise, let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Service</span></code>
            is a service class that is publicly and unambiguously derived from <a class="link" href="#classes.execution_context__service" title="5.11.&#160;Class execution_context::service"><code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code></a>.
            If the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>
            exists, <code class="computeroutput"><span class="identifier">Service</span></code> is the
            same type as <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            or <code class="computeroutput"><span class="identifier">Service</span></code> is publicly
            and unambiguously derived from <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            and <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> is publicly and unambiguously
            derived from <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code>.
            A service object of type <code class="computeroutput"><span class="identifier">Key</span></code>
            does not already exist in the <code class="computeroutput"><span class="identifier">execution_context</span></code>
            set identified by <code class="computeroutput"><span class="identifier">ctx</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Creates an object of type <code class="computeroutput"><span class="identifier">Service</span></code>, initializing it with <code class="computeroutput"><span class="identifier">Service</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">)</span>...<span class="special">)</span></code>, and adds it to the <code class="computeroutput"><span class="identifier">execution_context</span></code>
            set identified by <code class="computeroutput"><span class="identifier">ctx</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Throws:</em></span> <code class="computeroutput"><span class="identifier">service_already_exists</span></code>
            if a corresponding service object of type <code class="computeroutput"><span class="identifier">Key</span></code>
            is already present in the set.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Notes:</em></span> The reference returned remains valid until
            a call to <code class="computeroutput"><span class="identifier">destroy_context</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Service</span><span class="special">&gt;</span> <span class="keyword">bool</span> <span class="identifier">has_service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            Let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> if the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> exists; otherwise, let <code class="computeroutput"><span class="identifier">Key</span></code> be <code class="computeroutput"><span class="identifier">Service</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Service</span></code>
            is a service class that is publicly and unambiguously derived from <a class="link" href="#classes.execution_context__service" title="5.11.&#160;Class execution_context::service"><code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code></a>.
            If the nested typedef <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>
            exists, <code class="computeroutput"><span class="identifier">Service</span></code> is the
            same type as <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            or <code class="computeroutput"><span class="identifier">Service</span></code> is publicly
            and unambiguously derived from <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code>,
            and <code class="computeroutput"><span class="identifier">Service</span><span class="special">::</span><span class="identifier">key_type</span></code> is publicly and unambiguously
            derived from <code class="computeroutput"><span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> If an object of type <code class="computeroutput"><span class="identifier">Key</span></code>
            is present in <code class="computeroutput"><span class="identifier">ctx</span></code>, <code class="computeroutput"><span class="keyword">true</span></code>; otherwise, <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.execution_context__service"></a>5.11.&#160;Class <code class="literal">execution_context::service</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">execution_context</span><span class="special">::</span><span class="identifier">service</span>
      <span class="special">{</span>
      <span class="keyword">protected</span><span class="special">:</span>
        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">owner</span><span class="special">);</span>
        <span class="identifier">service</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">service</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">service</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">service</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="keyword">virtual</span> <span class="special">~</span><span class="identifier">service</span><span class="special">();</span>

        <span class="comment">// service observers:</span>

        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="keyword">friend</span> <span class="keyword">class</span> <span class="identifier">execution_context</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>

        <span class="comment">// service operations:</span>

        <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="identifier">shutdown_service</span><span class="special">()</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
        <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">fork_event</span> <span class="identifier">e</span><span class="special">);</span>

        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__service__constructors"></a>5.11.1.&#160;<code class="literal">execution_context::service</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">service</span><span class="special">(</span><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">owner</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">&amp;</span><span class="identifier">context_</span> <span class="special">==</span>
            <span class="special">&amp;</span><span class="identifier">owner</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__service__observers"></a>5.11.2.&#160;<code class="literal">execution_context::service</code> observers</h4></div></div></div><pre class="programlisting"><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">context_</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__execution_context__service__operations"></a>5.11.3.&#160;<code class="literal">execution_context::service</code> operations</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">notify_fork</span><span class="special">(</span><span class="identifier">fork_event</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Does nothing.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.is_executor"></a>5.12.&#160;Class template <code class="literal">is_executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span> <span class="special">:</span> <span class="identifier">false_type</span> <span class="special">{};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        <code class="computeroutput"><span class="identifier">is_executor</span></code> can be used to
        detect executor types satisfying the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor
        type requirements</a>.
      </p><p>
        Instantiations of the <code class="computeroutput"><span class="identifier">is_executor</span></code>
        template shall meet the UnaryTypeTrait requirements (C++ Std, [meta.rqmts]).
        A program may specialize this template for a user-defined type <code class="computeroutput"><span class="identifier">T</span></code> to have a BaseCharacteristic of <code class="computeroutput"><span class="identifier">integral_constant</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> </code><code class="literal"><span class="emphasis"><em>N</em></span></code><code class="computeroutput"><span class="special">&gt;</span></code> with <code class="literal"><span class="emphasis"><em>N</em></span>
        &gt; 0</code> to indicate that <code class="computeroutput"><span class="identifier">T</span></code>
        should be treated as an executor type.
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.executor_arg_t"></a>5.13.&#160;Executor argument tag</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">struct</span> <span class="identifier">executor_arg_t</span> <span class="special">{</span> <span class="special">};</span>
      <span class="identifier">constexpr</span> <span class="identifier">executor_arg_t</span> <span class="identifier">executor_arg</span> <span class="special">=</span> <span class="identifier">executor_arg_t</span><span class="special">();</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        The <code class="computeroutput"><span class="identifier">executor_arg_t</span></code> struct
        is an empty structure type used as a unique type to disambiguate constructor
        and function overloading. Specifically, types may have constructors with
        <code class="computeroutput"><span class="identifier">executor_arg_t</span></code> as the first
        argument, immediately followed by an argument of a type that satisfies the
        <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.uses_executor"></a>5.14.&#160;<code class="literal">uses_executor</code></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__uses_executor__trait"></a>5.14.1.&#160;<code class="literal">uses_executor</code> trait</h4></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">struct</span> <span class="identifier">uses_executor</span><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
          <span class="emphasis"><em>Remark:</em></span> Detects whether <code class="computeroutput"><span class="identifier">T</span></code>
          has a nested <code class="computeroutput"><span class="identifier">executor_type</span></code>
          that is convertible from <code class="computeroutput"><span class="identifier">Executor</span></code>.
          Meets the <code class="computeroutput"><span class="identifier">BinaryTypeTrait</span></code>
          requirements (C++ Std, [meta.rqmts]). The implementation shall provide
          a definition that is derived from <code class="computeroutput"><span class="identifier">false_type</span></code>.
          A program may specialize this template to derive from <code class="computeroutput"><span class="identifier">true_type</span></code>
          for a user-defined type <code class="computeroutput"><span class="identifier">T</span></code>
          that does not have a nested <code class="computeroutput"><span class="identifier">executor_type</span></code>
          but nonetheless can be constructed with an executor where either:
        </p><p>
          &#8212; the first argument of a constructor has type <code class="computeroutput"><span class="identifier">executor_type</span></code>
          and the second argument has type <code class="computeroutput"><span class="identifier">Executor</span></code>;
          or
        </p><p>
          &#8212; the last argument of a constructor has type <code class="computeroutput"><span class="identifier">Executor</span></code>.
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.uses_executor_construction"></a>5.14.2.&#160;uses-executor construction</h4></div></div></div><p>
          <span class="emphasis"><em>Uses-executor construction</em></span> with executor <code class="computeroutput"><span class="identifier">Executor</span></code> refers to the construction of
          an object <code class="computeroutput"><span class="identifier">obj</span></code> of type
          <code class="computeroutput"><span class="identifier">T</span></code>, using constructor arguments
          <code class="computeroutput"><span class="identifier">v1</span><span class="special">,</span>
          <span class="identifier">v2</span><span class="special">,</span>
          <span class="special">...,</span> <span class="identifier">vN</span></code>
          of types <code class="computeroutput"><span class="identifier">V1</span><span class="special">,</span>
          <span class="identifier">V2</span><span class="special">,</span>
          <span class="special">...,</span> <span class="identifier">VN</span></code>,
          respectively, and an executor <code class="computeroutput"><span class="identifier">ex</span></code>
          of type <code class="computeroutput"><span class="identifier">Executor</span></code>, according
          to the following rules:
        </p><p>
          &#8212; if <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is false and <code class="computeroutput"><span class="identifier">is_constructible</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">V1</span><span class="special">,</span> <span class="identifier">V2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">VN</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, then <code class="computeroutput"><span class="identifier">obj</span></code>
          is initialized as <code class="computeroutput"><span class="identifier">obj</span><span class="special">(</span><span class="identifier">v1</span><span class="special">,</span> <span class="identifier">v2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">vN</span><span class="special">)</span></code>;
        </p><p>
          &#8212; otherwise, if <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true and <code class="computeroutput"><span class="identifier">is_constructible</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">executor_arg_t</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="identifier">V1</span><span class="special">,</span> <span class="identifier">V2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">VN</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, then <code class="computeroutput"><span class="identifier">obj</span></code>
          is initialized as <code class="computeroutput"><span class="identifier">obj</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
          <span class="identifier">ex</span><span class="special">,</span>
          <span class="identifier">v1</span><span class="special">,</span>
          <span class="identifier">v2</span><span class="special">,</span>
          <span class="special">...,</span> <span class="identifier">vN</span><span class="special">)</span></code>;
        </p><p>
          &#8212; otherwise, if <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true and <code class="computeroutput"><span class="identifier">is_constructible</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">V1</span><span class="special">,</span> <span class="identifier">V2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">VN</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, then <code class="computeroutput"><span class="identifier">obj</span></code>
          is initialized as <code class="computeroutput"><span class="identifier">obj</span><span class="special">(</span><span class="identifier">v1</span><span class="special">,</span> <span class="identifier">v2</span><span class="special">,</span> <span class="special">...,</span> <span class="identifier">vN</span><span class="special">,</span> <span class="identifier">ex</span><span class="special">)</span></code>;
        </p><p>
          &#8212; otherwise, the request for uses-executor construction is ill-formed. [<span class="emphasis"><em>Note:</em></span>
          An error will result if <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true but the specific constructor does not take an executor. This definition
          prevents a silent failure to pass the executor to an element. &#8212;<span class="emphasis"><em>end
          note</em></span>]
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.associated_executor"></a>5.15.&#160;Class template <code class="literal">associated_executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span> <span class="special">=</span> <span class="identifier">system_executor</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">associated_executor</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">e</span> <span class="special">=</span> <span class="identifier">Executor</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        A program may specialize this traits type if the <code class="computeroutput"><span class="identifier">T</span></code>
        template parameter in the specialization is a user-defined type. The template
        parameter <code class="computeroutput"><span class="identifier">Executor</span></code> shall
        be a type meeting <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
      </p><p>
        Specializations of <code class="computeroutput"><span class="identifier">associated_executor</span></code>
        shall satisfy the requirements in the table below. In this table, <code class="computeroutput"><span class="identifier">X</span></code> is a specialization of <code class="computeroutput"><span class="identifier">associated_executor</span></code> for the template parameter
        <code class="computeroutput"><span class="identifier">T</span></code>; <code class="computeroutput"><span class="identifier">t</span></code>
        is a const reference to an object of type <code class="computeroutput"><span class="identifier">T</span></code>;
        and <code class="computeroutput"><span class="identifier">e</span></code> is an object of type
        <code class="computeroutput"><span class="identifier">Executor</span></code>.
      </p><div class="table"><a name="idm305329184048"></a><p class="title"><b>Table&#160;4.&#160;associated_executor specialization requirements</b></p><div class="table-contents"><table class="table" summary="associated_executor specialization requirements"><colgroup><col><col><col></colgroup><thead><tr><th>
                <p>
                  Expression
                </p>
              </th><th>
                <p>
                  Return type
                </p>
              </th><th>
                <p>
                  Note
                </p>
              </th></tr></thead><tbody><tr><td>
                <p>
                  <code class="computeroutput"><span class="keyword">typename</span> <span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  A type meeting <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
                </p>
              </td><td>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code>
                </p>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  Shall not exit via an exception.<br> Equivalent to <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
                  <span class="identifier">Executor</span><span class="special">())</span></code>.
                </p>
              </td></tr><tr><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
                  <span class="identifier">e</span><span class="special">)</span></code>
                </p>
              </td><td>
                <p>
                  <code class="computeroutput"><span class="identifier">X</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td><td>
                <p>
                  Shall not exit via an exception.
                </p>
              </td></tr></tbody></table></div></div><br class="table-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__associated_executor__members"></a>5.15.1.&#160;<code class="literal">associated_executor</code> members</h4></div></div></div><pre class="programlisting"><span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">type</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Type:</em></span> If <code class="computeroutput"><span class="identifier">T</span></code>
            has a nested type <code class="computeroutput"><span class="identifier">executor_type</span></code>,
            <code class="computeroutput"><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">::</span><span class="identifier">executor_type</span></code>.
            Otherwise <code class="computeroutput"><span class="identifier">Executor</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">e</span> <span class="special">=</span> <span class="identifier">Executor</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> If <code class="computeroutput"><span class="identifier">T</span></code>
            has a nested type <code class="computeroutput"><span class="identifier">executor_type</span></code>,
            <code class="computeroutput"><span class="identifier">t</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">()</span></code>.
            Otherwise <code class="computeroutput"><span class="identifier">e</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.get_associated_executor"></a>5.16.&#160;Function <code class="literal">get_associated_executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
  <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
    <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
          <span class="identifier">ex</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
  <span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
    <span class="identifier">get_associated_executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">())</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.executor_wrapper"></a>5.17.&#160;Class template <code class="literal">executor_wrapper</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">executor_wrapper</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// types:</span>

        <span class="keyword">typedef</span> <span class="identifier">T</span> <span class="identifier">wrapped_type</span><span class="special">;</span>
        <span class="keyword">typedef</span> <span class="identifier">Executor</span> <span class="identifier">executor_type</span><span class="special">;</span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">result_type</span><span class="special">;</span>          <span class="comment">// <span class="emphasis"><em>not always defined</em></span></span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">argument_type</span><span class="special">;</span>        <span class="comment">// <span class="emphasis"><em>not always defined</em></span></span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">first_argument_type</span><span class="special">;</span>  <span class="comment">// <span class="emphasis"><em>not always defined</em></span></span>
        <span class="keyword">typedef</span> <span class="emphasis"><em>see below</em></span> <span class="identifier">second_argument_type</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>not always defined</em></span></span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">T</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
        <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span>
        <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_wrapper</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="special">=</span> <span class="keyword">default</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
          <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
          <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
          <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span>
            <span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
          <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span>
            <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>

        <span class="special">~</span><span class="identifier">executor_wrapper</span><span class="special">();</span>

        <span class="comment">// executor wrapper access:</span>

        <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">unwrap</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">unwrap</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="comment">// executor wrapper invocation:</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
          <span class="identifier">result_of_t</span><span class="special">&lt;</span><span class="emphasis"><em>cv</em></span> <span class="identifier">T</span><span class="special">&amp;(</span><span class="identifier">Args</span><span class="special">&amp;&amp;...)&gt;</span> <span class="keyword">operator</span><span class="special">()(</span><span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">)</span> <span class="emphasis"><em>cv</em></span><span class="special">;</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">Executor</span> <span class="identifier">ex_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
        <span class="identifier">T</span> <span class="identifier">wrapped_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">handler_type</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Signature</span><span class="special">&gt;</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Signature</span><span class="special">&gt;,</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">type</span><span class="special">;</span>
      <span class="special">};</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor1</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Executor1</span><span class="special">&gt;;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code> is a wrapper around an object or function
        of type <code class="computeroutput"><span class="identifier">T</span></code>, and an executor
        object of type <code class="computeroutput"><span class="identifier">Executor</span></code> satisfying
        <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
      </p><p>
        <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code> has a weak result type (C++ Std, [func.require]).
        If <code class="computeroutput"><span class="identifier">T</span></code> is a function type,
        <code class="computeroutput"><span class="identifier">result_type</span></code> shall be a synonym
        for the return type of <code class="computeroutput"><span class="identifier">T</span></code>.
      </p><p>
        The template instantiation <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span>
        <span class="identifier">Executor</span><span class="special">&gt;</span></code>
        shall define a nested type named <code class="computeroutput"><span class="identifier">argument_type</span></code>
        as a synonym for <code class="computeroutput"><span class="identifier">T1</span></code> only
        if the type <code class="computeroutput"><span class="identifier">T</span></code> is any of the
        following:
      </p><p>
        &#8212; a function type or a pointer to function type taking one argument of type
        <code class="computeroutput"><span class="identifier">T1</span></code>
      </p><p>
        &#8212; a pointer to member function <code class="computeroutput"><span class="identifier">R</span>
        <span class="identifier">T0</span><span class="special">::</span><span class="identifier">f</span></code> <code class="literal"><span class="emphasis"><em>cv</em></span></code>
        (where <code class="literal"><span class="emphasis"><em>cv</em></span></code> represents the member function&#8217;s
        cv-qualifiers); the type <code class="computeroutput"><span class="identifier">T1</span></code>
        is <code class="literal"><span class="emphasis"><em>cv</em></span></code> <code class="computeroutput"><span class="identifier">T0</span><span class="special">*</span></code>
      </p><p>
        &#8212; a class type with a member type <code class="computeroutput"><span class="identifier">argument_type</span></code>;
        the type <code class="computeroutput"><span class="identifier">T1</span></code> is <code class="computeroutput"><span class="identifier">T</span><span class="special">::</span><span class="identifier">argument_type</span></code>.
      </p><p>
        The template instantiation <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span>
        <span class="identifier">Executor</span><span class="special">&gt;</span></code>
        shall define two nested types named <code class="computeroutput"><span class="identifier">first_argument_type</span></code>
        and <code class="computeroutput"><span class="identifier">second_argument_type</span></code>
        as synonyms for <code class="computeroutput"><span class="identifier">T1</span></code> and <code class="computeroutput"><span class="identifier">T2</span></code>, respectively, only if the type <code class="computeroutput"><span class="identifier">T</span></code> is any of the following:
      </p><p>
        &#8212; a function type or a pointer to function type taking two arguments of types
        <code class="computeroutput"><span class="identifier">T1</span></code> and <code class="computeroutput"><span class="identifier">T2</span></code>
      </p><p>
        &#8212; a pointer to member function <code class="computeroutput"><span class="identifier">R</span>
        <span class="identifier">T0</span><span class="special">::</span><span class="identifier">f</span><span class="special">(</span><span class="identifier">T2</span><span class="special">)</span></code> <code class="literal"><span class="emphasis"><em>cv</em></span></code>
        (where <code class="literal"><span class="emphasis"><em>cv</em></span></code> represents the member function&#8217;s
        cv-qualifiers); the type <code class="computeroutput"><span class="identifier">T1</span></code>
        is <code class="literal"><span class="emphasis"><em>cv</em></span></code> <code class="computeroutput"><span class="identifier">T0</span><span class="special">*</span></code>
      </p><p>
        &#8212; a class type with member types <code class="computeroutput"><span class="identifier">first_argument_type</span></code>
        and <code class="computeroutput"><span class="identifier">second_argument_type</span></code>;
        the type <code class="computeroutput"><span class="identifier">T1</span></code> is <code class="computeroutput"><span class="identifier">T</span><span class="special">::</span><span class="identifier">first_argument_type</span></code>.
        and the type <code class="computeroutput"><span class="identifier">T2</span></code> is <code class="computeroutput"><span class="identifier">T</span><span class="special">::</span><span class="identifier">second_argument_type</span></code>.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_wrapper__constructors"></a>5.17.1.&#160;<code class="literal">executor_wrapper</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">T</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of type <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">ex_</span></code> with
            the value <code class="computeroutput"><span class="identifier">ex</span></code>. If <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, performs uses-executor
            construction to initialize <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
            <span class="identifier">ex_</span><span class="special">,</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">t</span><span class="special">))</span></code>;
            otherwise, initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">t</span><span class="special">))</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">U</span></code>
            is <code class="computeroutput"><span class="identifier">T</span></code> or convertible to
            <code class="computeroutput"><span class="identifier">T</span></code>. <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is <code class="computeroutput"><span class="identifier">Executor</span></code> or convertible
            to <code class="computeroutput"><span class="identifier">Executor</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of type <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">ex_</span></code> with
            <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">()</span></code>.
            If <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, performs uses-executor
            construction to initialize <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
            <span class="identifier">ex_</span><span class="special">,</span>
            <span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">())</span></code>;
            otherwise, initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">())</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">U</span></code>
            is <code class="computeroutput"><span class="identifier">T</span></code> or convertible to
            <code class="computeroutput"><span class="identifier">T</span></code>. <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is <code class="computeroutput"><span class="identifier">Executor</span></code> or convertible
            to <code class="computeroutput"><span class="identifier">Executor</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of type <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">ex_</span></code> with
            <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">()</span></code>.
            If <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, performs uses-executor
            construction to initialize <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
            <span class="identifier">ex_</span><span class="special">,</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">()))</span></code>;
            otherwise, initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">()))</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span>
    <span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">U</span></code>
            is <code class="computeroutput"><span class="identifier">T</span></code> or convertible to
            <code class="computeroutput"><span class="identifier">T</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of type <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">ex_</span></code> with
            <code class="computeroutput"><span class="identifier">ex</span></code>. If <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, performs uses-executor
            construction to initialize <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
            <span class="identifier">ex_</span><span class="special">,</span>
            <span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">())</span></code>;
            otherwise, initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">())</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">U</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">(</span><span class="identifier">executor_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span>
    <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">U</span><span class="special">,</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">U</span></code>
            is <code class="computeroutput"><span class="identifier">T</span></code> or convertible to
            <code class="computeroutput"><span class="identifier">T</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of type <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initializes <code class="computeroutput"><span class="identifier">ex_</span></code> with
            <code class="computeroutput"><span class="identifier">ex</span></code>. If <code class="computeroutput"><span class="identifier">uses_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code> is true, performs uses-executor
            construction to initialize <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">executor_arg</span><span class="special">,</span>
            <span class="identifier">ex_</span><span class="special">,</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">()))</span></code>;
            otherwise, initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">()))</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_wrapper__access"></a>5.17.2.&#160;<code class="literal">executor_wrapper</code> access</h4></div></div></div><pre class="programlisting"><span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">unwrap</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
<span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">unwrap</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">wrapped_</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">executor_</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_wrapper__invocation"></a>5.17.3.&#160;<code class="literal">executor_wrapper</code> invocation</h4></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
  <span class="identifier">result_of_t</span><span class="special">&lt;</span><span class="emphasis"><em>cv</em></span> <span class="identifier">T</span><span class="special">&amp;(</span><span class="identifier">Args</span><span class="special">&amp;&amp;...)&gt;</span> <span class="keyword">operator</span><span class="special">()(</span><span class="identifier">Args</span><span class="special">&amp;&amp;...</span> <span class="identifier">args</span><span class="special">)</span> <span class="emphasis"><em>cv</em></span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="literal"><span class="emphasis"><em>INVOKE</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">unwrap</span><span class="special">(),</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Args</span><span class="special">&gt;(</span><span class="identifier">args</span><span class="special">)</span>...<span class="special">)</span></code>
            (C++ Std, [func.require]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Remarks:</em></span> <code class="computeroutput"><span class="keyword">operator</span><span class="special">()</span></code> is described for exposition only. Implementations
            are not required to provide an actual <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">::</span><span class="keyword">operator</span><span class="special">()</span></code>. Implementations are permitted to support
            <code class="computeroutput"><span class="identifier">executor_wrapper</span></code> function
            invocation through multiple overloaded operators or through other means.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.class_template_specialization___async_result_"></a>5.17.4.&#160;Class template specialization <code class="literal">async_result</code></h4></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">type</span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">wrapper</span><span class="special">);</span>
        <span class="identifier">async_result</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">async_result</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

        <span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">wrapped_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
          The implementation shall provide a specialization of <code class="computeroutput"><span class="identifier">async_result</span></code>
          that meets the <a class="link" href="#classes.async_result" title="5.3.&#160;Class template async_result"><code class="computeroutput"><span class="identifier">async_result</span></code>
          specialization requirements</a>.
        </p><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">wrapper</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Initializes <code class="computeroutput"><span class="identifier">wrapped_</span></code>
            with <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">(</span><span class="identifier">wrapper</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">())</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">wrapped_</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.class_template_specialization___associated_allocator_"></a>5.17.5.&#160;Class template specialization <code class="literal">associated_allocator</code></h4></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">associated_allocator_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">w</span><span class="special">,</span>
                        <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
          The implementation shall provide a specialization of <code class="computeroutput"><span class="identifier">associated_allocator</span></code>
          that meets the <a class="link" href="#classes.associated_allocator" title="5.6.&#160;Class template associated_allocator"><code class="computeroutput"><span class="identifier">associated_allocator</span></code> specialization requirements</a>.
        </p><pre class="programlisting"><span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">w</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">associated_allocator</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">w</span><span class="special">.</span><span class="identifier">unwrap</span><span class="special">(),</span> <span class="identifier">a</span><span class="special">)</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.class_template_specialization___associated_executor_"></a>5.17.6.&#160;Class template specialization <code class="literal">associated_executor</code></h4></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor1</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;,</span> <span class="identifier">Executor1</span><span class="special">&gt;</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">Executor</span> <span class="identifier">type</span><span class="special">;</span>

        <span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">w</span><span class="special">,</span>
                        <span class="keyword">const</span> <span class="identifier">Executor1</span><span class="special">&amp;</span> <span class="identifier">e</span> <span class="special">=</span> <span class="identifier">Executor1</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
          The implementation shall provide a specialization of <code class="computeroutput"><span class="identifier">associated_executor</span></code>
          that meets the <a class="link" href="#classes.associated_executor" title="5.15.&#160;Class template associated_executor"><code class="computeroutput"><span class="identifier">associated_executor</span></code> specialization requirements</a>.
        </p><pre class="programlisting"><span class="keyword">static</span> <span class="identifier">type</span> <span class="identifier">get</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">w</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">Executor1</span><span class="special">&amp;</span> <span class="identifier">e</span> <span class="special">=</span> <span class="identifier">Executor1</span><span class="special">())</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">()</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.wrap"></a>5.18.&#160;Function <code class="literal">wrap</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">wrap</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="identifier">Executor</span><span class="special">&gt;(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;(</span><span class="identifier">t</span><span class="special">),</span> <span class="identifier">ex</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
    <span class="identifier">wrap</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&amp;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">executor_wrapper</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;,</span> <span class="keyword">typename</span>
          <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;(</span><span class="identifier">t</span><span class="special">),</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">())</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.executor_work"></a>5.19.&#160;Class template <code class="literal">executor_work</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">executor_work</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// types:</span>

        <span class="keyword">typedef</span> <span class="identifier">Executor</span> <span class="identifier">executor_type</span><span class="special">;</span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="keyword">explicit</span> <span class="identifier">executor_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_work</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_work</span><span class="special">(</span><span class="identifier">executor_work</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">executor_work</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

        <span class="special">~</span><span class="identifier">executor_work</span><span class="special">();</span>

        <span class="comment">// executor work observers:</span>

        <span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">bool</span> <span class="identifier">owns_work</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="comment">// executor work modifiers:</span>

        <span class="keyword">void</span> <span class="identifier">reset</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">Executor</span> <span class="identifier">ex_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
        <span class="keyword">bool</span> <span class="identifier">owns_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_work__constructors"></a>5.19.1.&#160;<code class="literal">executor_work</code> constructors</h4></div></div></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">executor_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">executor_work</span></code>, initializing <code class="computeroutput"><span class="identifier">ex_</span></code> with <code class="computeroutput"><span class="identifier">ex</span></code>,
            and then performing <code class="computeroutput"><span class="identifier">ex_</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">ex</span>
            <span class="special">==</span> <span class="identifier">ex_</span></code>
            and <code class="computeroutput"><span class="identifier">owns_</span> <span class="special">==</span>
            <span class="keyword">true</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_work</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">executor_work</span></code>, initializing <code class="computeroutput"><span class="identifier">ex_</span></code> with <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">ex</span></code>.
            If <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">owns_</span> <span class="special">==</span>
            <span class="keyword">true</span></code>, performs <code class="computeroutput"><span class="identifier">ex_</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">ex</span>
            <span class="special">==</span> <span class="identifier">other</span><span class="special">.</span><span class="identifier">ex_</span></code>
            and <code class="computeroutput"><span class="identifier">owns_</span> <span class="special">==</span>
            <span class="identifier">other</span><span class="special">.</span><span class="identifier">owns_</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_work</span><span class="special">(</span><span class="identifier">executor_work</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">executor_work</span></code>, initializing <code class="computeroutput"><span class="identifier">ex_</span></code> with <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">ex</span></code>
            and <code class="computeroutput"><span class="identifier">owns_</span></code> with <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">owns_</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">ex</span></code>
            is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">ex_</span></code>,
            <code class="computeroutput"><span class="identifier">owns_</span></code> is equal to the
            prior value of <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">owns_</span></code>,
            and <code class="computeroutput"><span class="identifier">other</span><span class="special">.</span><span class="identifier">owns_</span> <span class="special">==</span>
            <span class="keyword">false</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_work__destructor"></a>5.19.2.&#160;<code class="literal">executor_work</code> destructor</h4></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">owns_</span></code>
            is true, performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">on_work_finished</span><span class="special">()</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_work__observers"></a>5.19.3.&#160;<code class="literal">executor_work</code> observers</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">ex_</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">owns_work</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">owns_</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor_work__modifiers"></a>5.19.4.&#160;<code class="literal">executor_work</code> modifiers</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">reset</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">owns_</span></code>
            is true, performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">on_work_finished</span><span class="special">()</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">owns_</span>
            <span class="special">==</span> <span class="keyword">false</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.make_work"></a>5.20.&#160;Function <code class="literal">make_work</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
  <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span>
    <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;(</span><span class="identifier">ex</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
  <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span>
    <span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> An object of type <code class="computeroutput"><span class="identifier">executor_work</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span></code>
          initialized with the result of <code class="computeroutput"><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">&gt;</span>
  <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;&gt;</span>
    <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> An object of type <code class="computeroutput"><span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;&gt;</span></code> initialized with the result of
          <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is false and <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is false.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
  <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;</span>
    <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> An object of type <code class="computeroutput"><span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;&gt;</span></code> initialized with the result of
          <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span>
          <span class="identifier">ex</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">&gt;</span>
  <span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;&gt;</span>
    <span class="identifier">make_work</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">T</span><span class="special">&amp;</span> <span class="identifier">t</span><span class="special">,</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> An object of type <code class="computeroutput"><span class="identifier">executor_work</span><span class="special">&lt;</span><span class="identifier">associated_executor_t</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;&gt;</span></code>
          initialized with the result of <code class="computeroutput"><span class="identifier">associated_executor</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ExecutionContext</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;::</span><span class="identifier">get</span><span class="special">(</span><span class="identifier">t</span><span class="special">,</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">())</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.system_executor"></a>5.21.&#160;Class <code class="literal">system_executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">system_executor</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>

        <span class="comment">// executor operations:</span>

        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
      <span class="special">};</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;)</span> <span class="identifier">noexcept</span><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Class <code class="computeroutput"><span class="identifier">system_executor</span></code> is
        a <code class="computeroutput"><span class="identifier">DefaultConstructible</span></code> type
        (C++ Std, [defaultconstructible]) satisfying <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor
        requirements</a>. It represents a set of rules where function objects
        are permitted to execute on any thread.
      </p><p>
        To satisfy the executor requirements for the <code class="computeroutput"><span class="identifier">post</span></code>
        and <code class="computeroutput"><span class="identifier">defer</span></code> member functions,
        the system executor may allocate <code class="computeroutput"><span class="identifier">thread</span></code>
        objects to run the submitted function objects. If <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">exit</span></code>
        is called, and there remain unexecuted functions objects that have been submitted
        using <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>, the implementation shall discard
        these function objects without calling them.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__system_executor__operations"></a>5.21.1.&#160;<code class="literal">system_executor</code> operations</h4></div></div></div><pre class="programlisting"><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> A reference to a static-duration object
            of a type derived from <code class="computeroutput"><span class="identifier">execution_context</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Does nothing.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Does nothing.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> as if in a thread of execution represented
            by a <code class="computeroutput"><span class="identifier">thread</span></code> object, with
            the call to <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">()</span></code> being evaluated in the thread that
            called <code class="computeroutput"><span class="identifier">post</span></code>. Any exception
            propagated from the execution of <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> shall result in a call to <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">terminate</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> as if in a thread of execution represented
            by a <code class="computeroutput"><span class="identifier">thread</span></code> object, with
            the call to <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">()</span></code> being evaluated in the thread that
            called <code class="computeroutput"><span class="identifier">defer</span></code>. Any exception
            propagated from the execution of <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code> shall result in a call to <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">terminate</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__system_executor__comparisons"></a>5.21.2.&#160;<code class="literal">system_executor</code> comparisons</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;,</span> <span class="keyword">const</span> <span class="identifier">system_executor</span><span class="special">&amp;)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.bad_executor"></a>5.22.&#160;Class <code class="literal">bad_executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">bad_executor</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">exception</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// constructor:</span>
        <span class="identifier">bad_executor</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        An exception of type <code class="computeroutput"><span class="identifier">bad_executor</span></code>
        is thrown by <code class="computeroutput"><span class="identifier">executor</span></code> member
        functions <code class="computeroutput"><span class="identifier">dispatch</span></code>, <code class="computeroutput"><span class="identifier">post</span></code> and <code class="computeroutput"><span class="identifier">defer</span></code>
        when the executor object has no target.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__bad_executor__constructor"></a>5.22.1.&#160;<code class="literal">bad_executor</code> constructor</h4></div></div></div><pre class="programlisting"><span class="identifier">bad_executor</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs a <code class="computeroutput"><span class="identifier">bad_executor</span></code>
            object.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.executor"></a>5.23.&#160;Class <code class="literal">executor</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">executor</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">executor</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor</span><span class="special">(</span><span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">executor</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="identifier">executor</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>

        <span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor</span><span class="special">&amp;&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>

        <span class="special">~</span><span class="identifier">executor</span><span class="special">();</span>

        <span class="comment">// executor modifiers:</span>

        <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">assign</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">);</span>

        <span class="comment">// executor operations:</span>

        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>

        <span class="comment">// executor capacity:</span>

        <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="keyword">bool</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="comment">// executor target access:</span>

        <span class="keyword">const</span> <span class="identifier">type_info</span><span class="special">&amp;</span> <span class="identifier">target_type</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">Executor</span><span class="special">*</span> <span class="identifier">target</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">*</span> <span class="identifier">target</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="special">};</span>

      <span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">executor</span><span class="special">&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

      <span class="comment">// executor comparisons:</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="comment">// executor specialized algorithms:</span>

      <span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>

  <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
    <span class="keyword">struct</span> <span class="identifier">uses_allocator</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">executor</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        The <code class="computeroutput"><span class="identifier">executor</span></code> class provides
        a polymorphic wrapper for types that satisfy the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor
        requirements</a>. The <span class="emphasis"><em>target object</em></span> is the executor
        object that is held by the wrapper. The <code class="computeroutput"><span class="identifier">executor</span></code>
        type itself meets the requirements for an <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor</a>.
      </p><p>
        [<span class="emphasis"><em>Note:</em></span> To meet the <code class="computeroutput"><span class="identifier">noexcept</span></code>
        requirements for executor copy constructors and move constructors, implementations
        may share a target between two or more <code class="computeroutput"><span class="identifier">executor</span></code>
        objects. &#8212;<span class="emphasis"><em>end note</em></span>]
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__constructors"></a>5.23.1.&#160;<code class="literal">executor</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">!*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">!*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">!*</span><span class="keyword">this</span></code> if <code class="computeroutput"><span class="special">!</span><span class="identifier">e</span></code>; otherwise, <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> targets <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">target</span><span class="special">()</span></code> or a copy of <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">target</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="special">!</span><span class="identifier">e</span></code>, <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has no target; otherwise, moves
            <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">target</span><span class="special">()</span></code>
            or move-constructs the target of <code class="computeroutput"><span class="identifier">e</span></code>
            into the target of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>,
            leaving <code class="computeroutput"><span class="identifier">e</span></code> in a valid
            state with an unspecified value.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">executor</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Executor</span></code>
            shall satisfy the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> targets a copy of <code class="computeroutput"><span class="identifier">e</span></code>
            initialized with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in
            overload resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
            is true.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="identifier">executor</span><span class="special">(</span><span class="identifier">allocator_arg_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Executor</span></code>
            shall satisfy the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
            <code class="computeroutput"><span class="identifier">Allocator</span></code> conforms to
            the <code class="computeroutput"><span class="identifier">Allocator</span></code> requirements
            (C++ Std, [allocator.requirements]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> targets a copy of <code class="computeroutput"><span class="identifier">e</span></code>
            initialized with <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">e</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            A copy of the allocator argument is used to allocate memory, if necessary,
            for the internal data structures of the constructed <code class="computeroutput"><span class="identifier">executor</span></code>
            object.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__assignment"></a>5.23.2.&#160;<code class="literal">executor</code> assignment</h4></div></div></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">e</span><span class="special">).</span><span class="identifier">swap</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor</span><span class="special">&amp;&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Replaces the target of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> with the target of <code class="computeroutput"><span class="identifier">e</span></code>, leaving <code class="computeroutput"><span class="identifier">e</span></code>
            in a valid state with an unspecified value.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">nullptr</span><span class="special">).</span><span class="identifier">swap</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">e</span><span class="special">)).</span><span class="identifier">swap</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in
            overload resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
            is true.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__destructor"></a>5.23.3.&#160;<code class="literal">executor</code> destructor</h4></div></div></div><pre class="programlisting"><span class="special">~</span><span class="identifier">executor</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">!=</span> <span class="identifier">nullptr</span></code>, releases shared ownership
            of, or destroys, the target of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__modifiers"></a>5.23.4.&#160;<code class="literal">executor</code> modifiers</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Interchanges the targets of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
            and <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">assign</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">e</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">executor</span><span class="special">(</span><span class="identifier">allocator_arg</span><span class="special">,</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">e</span><span class="special">)).</span><span class="identifier">swap</span><span class="special">(*</span><span class="keyword">this</span><span class="special">)</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__operations"></a>5.23.5.&#160;<code class="literal">executor</code> operations</h4></div></div></div><pre class="programlisting"><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">on_work_finished</span><span class="special">()</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">g</span><span class="special">,</span> <span class="identifier">a</span><span class="special">)</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, and <code class="computeroutput"><span class="identifier">g</span></code>
            is a function object of unspecified type that, when called as <code class="computeroutput"><span class="identifier">g</span><span class="special">()</span></code>,
            performs <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">(</span><span class="identifier">f</span><span class="special">)()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">g</span><span class="special">,</span> <span class="identifier">a</span><span class="special">)</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, and <code class="computeroutput"><span class="identifier">g</span></code>
            is a function object of unspecified type that, when called as <code class="computeroutput"><span class="identifier">g</span><span class="special">()</span></code>,
            performs <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">(</span><span class="identifier">f</span><span class="special">)()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">e</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">g</span><span class="special">,</span> <span class="identifier">a</span><span class="special">)</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>, and <code class="computeroutput"><span class="identifier">g</span></code>
            is a function object of unspecified type that, when called as <code class="computeroutput"><span class="identifier">g</span><span class="special">()</span></code>,
            performs <code class="computeroutput"><span class="identifier">DECAY_COPY</span><span class="special">(</span><span class="identifier">f</span><span class="special">)()</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__capacity"></a>5.23.6.&#160;<code class="literal">executor</code> capacity</h4></div></div></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="keyword">bool</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>
            if <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
            has a target, otherwise <code class="computeroutput"><span class="keyword">false</span></code>,
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__target_access"></a>5.23.7.&#160;<code class="literal">executor</code> target access</h4></div></div></div><pre class="programlisting"><span class="keyword">const</span> <span class="identifier">type_info</span><span class="special">&amp;</span> <span class="identifier">target_type</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> If <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> has a target of type <code class="computeroutput"><span class="identifier">T</span></code>, <code class="computeroutput"><span class="keyword">typeid</span><span class="special">(</span><span class="identifier">T</span><span class="special">)</span></code>; otherwise, <code class="computeroutput"><span class="keyword">typeid</span><span class="special">(</span><span class="keyword">void</span><span class="special">)</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="identifier">Executor</span><span class="special">*</span> <span class="identifier">target</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">*</span> <span class="identifier">target</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Executor</span></code>
            shall satisfy the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> If <code class="computeroutput"><span class="identifier">target_type</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">typeid</span><span class="special">(</span><span class="identifier">Executor</span><span class="special">)</span></code>
            a pointer to the stored executor target; otherwise a null pointer.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__comparisons"></a>5.23.8.&#160;<code class="literal">executor</code> comparisons</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <br> &#8212; <code class="computeroutput"><span class="keyword">true</span></code>
            if <code class="computeroutput"><span class="special">!</span><span class="identifier">a</span></code>
            and <code class="computeroutput"><span class="special">!</span><span class="identifier">b</span></code>;<br>
            &#8212; <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="identifier">a</span></code>
            and <code class="computeroutput"><span class="identifier">b</span></code> share a target;<br>
            &#8212; <code class="computeroutput"><span class="keyword">true</span></code> if <code class="computeroutput"><span class="identifier">e</span></code>
            and <code class="computeroutput"><span class="identifier">f</span></code> are the same type
            and <code class="computeroutput"><span class="identifier">e</span> <span class="special">==</span>
            <span class="identifier">f</span></code>, where <code class="computeroutput"><span class="identifier">e</span></code>
            is the target object of <code class="computeroutput"><span class="identifier">a</span></code>
            and <code class="computeroutput"><span class="identifier">f</span></code> is the target object
            of <code class="computeroutput"><span class="identifier">b</span></code>;<br> &#8212; otherwise
            <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
<span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">!</span><span class="identifier">e</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">!(</span><span class="identifier">a</span> <span class="special">==</span> <span class="identifier">b</span><span class="special">)</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">nullptr_t</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
<span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="identifier">nullptr_t</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">(</span><span class="keyword">bool</span><span class="special">)</span> <span class="identifier">e</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__executor__specialized_algorithms"></a>5.23.9.&#160;<code class="literal">executor</code> specialized algorithms</h4></div></div></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">swap</span><span class="special">(</span><span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">executor</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> <code class="computeroutput"><span class="identifier">a</span><span class="special">.</span><span class="identifier">swap</span><span class="special">(</span><span class="identifier">b</span><span class="special">)</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.dispatch"></a>5.24.&#160;Function <code class="literal">dispatch</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.post"></a>5.25.&#160;Function <code class="literal">post</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.defer"></a>5.26.&#160;Function <code class="literal">defer</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">CompletionToken</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionToken</span><span class="special">&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_strand___synopsis"></a>5.27.&#160;Header <code class="literal">&lt;experimental/strand&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">class</span> <a class="link" href="#classes.strand" title="5.28.&#160;Class template strand">strand</a><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>
      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
        <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.strand"></a>5.28.&#160;Class template <code class="literal">strand</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">strand</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// types:</span>

        <span class="keyword">typedef</span> <span class="identifier">Executor</span> <span class="identifier">inner_executor_type</span><span class="special">;</span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">strand</span><span class="special">();</span>
        <span class="keyword">explicit</span> <span class="identifier">strand</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">ex</span><span class="special">);</span>
        <span class="identifier">strand</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="identifier">strand</span><span class="special">(</span><span class="identifier">strand</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">(</span><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>

        <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">strand</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>

        <span class="special">~</span><span class="identifier">strand</span><span class="special">();</span>

        <span class="comment">// strand operations:</span>

        <span class="identifier">inner_executor_type</span> <span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">Executor</span> <span class="identifier">inner_ex_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>
        is a wrapper around an object of type <code class="computeroutput"><span class="identifier">Executor</span></code>
        satisfying <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>.
        <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>
        satisfies the Executor requirements.
      </p><p>
        A strand provides guarantees of ordering and non-concurrency. Given:
      </p><p>
        &#8212; strand objects <code class="computeroutput"><span class="identifier">s1</span></code> and <code class="computeroutput"><span class="identifier">s2</span></code> such that <code class="computeroutput"><span class="identifier">s1</span>
        <span class="special">==</span> <span class="identifier">s2</span></code>
      </p><p>
        &#8212; a function object <code class="computeroutput"><span class="identifier">f1</span></code> added
        to the strand <code class="computeroutput"><span class="identifier">s1</span></code> using <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>,
        or using <code class="computeroutput"><span class="identifier">dispatch</span></code> when <code class="computeroutput"><span class="identifier">s1</span><span class="special">.</span><span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">false</span></code>
      </p><p>
        &#8212; a function object <code class="computeroutput"><span class="identifier">f2</span></code> added
        to the strand <code class="computeroutput"><span class="identifier">s2</span></code> using <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>,
        or using <code class="computeroutput"><span class="identifier">dispatch</span></code> when <code class="computeroutput"><span class="identifier">s2</span><span class="special">.</span><span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">false</span></code>
      </p><p>
        then the implementation shall invoke <code class="computeroutput"><span class="identifier">f1</span></code>
        and <code class="computeroutput"><span class="identifier">f2</span></code> such that:
      </p><p>
        &#8212; the invocation of <code class="computeroutput"><span class="identifier">f1</span></code> is not
        concurrent with the invocation of <code class="computeroutput"><span class="identifier">f2</span></code>
      </p><p>
        &#8212; the invocation of <code class="computeroutput"><span class="identifier">f1</span></code> synchronizes
        with the invocation of <code class="computeroutput"><span class="identifier">f2</span></code>.
      </p><p>
        Furthermore, if the addition of <code class="computeroutput"><span class="identifier">f1</span></code>
        happens before the addition of <code class="computeroutput"><span class="identifier">f2</span></code>,
        then the invocation of <code class="computeroutput"><span class="identifier">f1</span></code>
        happens before the invocation of <code class="computeroutput"><span class="identifier">f2</span></code>.
      </p><p>
        The strand copy constructors, comparison operators, and member functions
        shall not introduce data races as a result of concurrent calls to those functions
        from different threads.
      </p><p>
        If any function <code class="computeroutput"><span class="identifier">f</span></code> executed
        by the strand throws an exception, the subsequent strand state shall be as
        if <code class="computeroutput"><span class="identifier">f</span></code> had exited without throwing
        an exception.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__strand__constructors"></a>5.28.1.&#160;<code class="literal">strand</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">strand</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>
            that represents a unique ordered, non-concurrent state. Initializes
            <code class="computeroutput"><span class="identifier">inner_ex_</span></code> with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">()</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Remarks:</em></span> This overload shall not participate in
            overload resolution unless <code class="computeroutput"><span class="identifier">Executor</span></code>
            satisfies the <code class="computeroutput"><span class="identifier">DefaultConstructible</span></code>
            requirements (C++ Std, [defaultconstructible]).
          </p></blockquote></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">strand</span><span class="special">(</span><span class="identifier">Executor</span> <span class="identifier">ex</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>
            that represents a unique ordered, non-concurrent state. Initializes
            <code class="computeroutput"><span class="identifier">inner_ex_</span></code> with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">strand</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initalizes <code class="computeroutput"><span class="identifier">inner_ex_</span></code>
            with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">inner_ex_</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <br> &#8212; <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code><br> &#8212; <code class="computeroutput"><span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="special">==</span> <span class="identifier">other</span><span class="special">.</span><span class="identifier">get_inner_executor</span><span class="special">()</span></code>
          </p></blockquote></div><pre class="programlisting"><span class="identifier">strand</span><span class="special">(</span><span class="identifier">strand</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initalizes <code class="computeroutput"><span class="identifier">inner_ex_</span></code>
            with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">inner_ex_</span><span class="special">))</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <br> &#8212; <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code><br> &#8212; <code class="computeroutput"><span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="special">==</span> <span class="identifier">other</span><span class="special">.</span><span class="identifier">get_inner_executor</span><span class="special">()</span></code>
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is convertible to <code class="computeroutput"><span class="identifier">Executor</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initalizes <code class="computeroutput"><span class="identifier">inner_ex_</span></code>
            with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">inner_ex_</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">(</span><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is convertible to <code class="computeroutput"><span class="identifier">Executor</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Initalizes <code class="computeroutput"><span class="identifier">inner_ex_</span></code>
            with <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">(</span><span class="identifier">other</span><span class="special">.</span><span class="identifier">inner_ex_</span><span class="special">)</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__strand__assignment"></a>5.28.2.&#160;<code class="literal">strand</code> assignment</h4></div></div></div><pre class="programlisting"><span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Executor</span></code>
            is <code class="computeroutput"><span class="identifier">Assignable</span></code> (C++ Std
            [assignable]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <br> &#8212; <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code><br> &#8212; <code class="computeroutput"><span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="special">==</span> <span class="identifier">other</span><span class="special">.</span><span class="identifier">get_inner_executor</span><span class="special">()</span></code>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">strand</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">Executor</span></code>
            is <code class="computeroutput"><span class="identifier">Assignable</span></code> (C++ Std
            [assignable]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <br> &#8212; <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code><br> &#8212; <code class="computeroutput"><span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="special">==</span> <span class="identifier">other</span><span class="special">.</span><span class="identifier">get_inner_executor</span><span class="special">()</span></code>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is convertible to <code class="computeroutput"><span class="identifier">Executor</span></code>.
            <code class="computeroutput"><span class="identifier">Executor</span></code> is <code class="computeroutput"><span class="identifier">Assignable</span></code> (C++ Std [assignable]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="keyword">operator</span><span class="special">=(</span><span class="identifier">Executor</span><span class="special">(</span><span class="identifier">other</span><span class="special">))</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">OtherExecutor</span><span class="special">&gt;</span> <span class="identifier">strand</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">OtherExecutor</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">other</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> <code class="computeroutput"><span class="identifier">OtherExecutor</span></code>
            is convertible to <code class="computeroutput"><span class="identifier">Executor</span></code>.
            <code class="computeroutput"><span class="identifier">Executor</span></code> is <code class="computeroutput"><span class="identifier">Assignable</span></code> (C++ Std [assignable]).
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="keyword">operator</span><span class="special">=(</span><span class="identifier">Executor</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">other</span><span class="special">)))</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__strand__destructor"></a>5.28.3.&#160;<code class="literal">strand</code> destructor</h4></div></div></div><pre class="programlisting"><span class="special">~</span><span class="identifier">strand</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Destroys an object of class <code class="computeroutput"><span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;</span></code>.
            Function objects that were added to the strand but have not yet been
            executed shall still be executed in a way that meets the guarantees of
            ordering and non-concurrency.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__strand__operations"></a>5.28.4.&#160;<code class="literal">strand</code> operations</h4></div></div></div><pre class="programlisting"><span class="identifier">inner_executor_type</span> <span class="identifier">get_inner_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">inner_ex_</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>
            if the current thread of execution is invoking a function that was submitted
            to the strand, or to any other strand object <code class="computeroutput"><span class="identifier">s</span></code>
            such that <code class="computeroutput"><span class="identifier">s</span> <span class="special">==</span>
            <span class="special">*</span><span class="keyword">this</span></code>,
            using <code class="computeroutput"><span class="identifier">dispatch</span></code>, <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>;
            otherwise <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">execution_context</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Calls <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">.</span><span class="identifier">on_work_started</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Calls <code class="computeroutput"><span class="identifier">inner_ex_</span><span class="special">.</span><span class="identifier">on_work_finished</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">running_in_this_thread</span><span class="special">()</span></code> is true, calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code>. Otherwise, requests invocation of
            <code class="computeroutput"><span class="identifier">f</span></code>, as if by forwarding
            the function object <code class="computeroutput"><span class="identifier">f</span></code>
            and allocator <code class="computeroutput"><span class="identifier">a</span></code> to the
            executor <code class="computeroutput"><span class="identifier">inner_ex_</span></code>, such
            that the guarantees of ordering and non-concurrency are met.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If <code class="computeroutput"><span class="identifier">f</span></code> exits via an exception,
            and the execution of <code class="computeroutput"><span class="identifier">f</span></code>
            is performed in the current thread and before <code class="computeroutput"><span class="identifier">dispatch</span></code>
            returns, the exception shall propagate to the caller of <code class="computeroutput"><span class="identifier">dispatch</span><span class="special">()</span></code>
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests invocation of <code class="computeroutput"><span class="identifier">f</span></code>,
            as if by forwarding the function object <code class="computeroutput"><span class="identifier">f</span></code>
            and allocator <code class="computeroutput"><span class="identifier">a</span></code> to the
            executor <code class="computeroutput"><span class="identifier">inner_ex_</span></code>, such
            that the guarantees of ordering and non-concurrency are met.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests invocation of <code class="computeroutput"><span class="identifier">f</span></code>,
            as if by forwarding the function object <code class="computeroutput"><span class="identifier">f</span></code>
            and allocator <code class="computeroutput"><span class="identifier">a</span></code> to the
            executor <code class="computeroutput"><span class="identifier">inner_ex_</span></code>, such
            that the guarantees of ordering and non-concurrency are met.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__strand__comparisons"></a>5.28.5.&#160;<code class="literal">strand</code> comparisons</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>,
            if the strand objects share the same ordered, non-concurrent state; otherwise
            <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">strand</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;&amp;</span> <span class="identifier">b</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">!(</span><span class="identifier">a</span> <span class="special">==</span> <span class="identifier">b</span><span class="special">)</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_timer___synopsis"></a>5.29.&#160;Header <code class="literal">&lt;experimental/timer&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">chrono</span><span class="special">&gt;</span>

<span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

    // <a class="link" href="#functions.dispatch_at" title="5.30.&#160;Function dispatch_at">dispatch_at</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                       <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                       <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                       <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    // <a class="link" href="#functions.post_at" title="5.31.&#160;Function post_at">post_at</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    // <a class="link" href="#functions.defer_at" title="5.32.&#160;Function defer_at">defer_at</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
        <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
        <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                    <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    // <a class="link" href="#functions.dispatch_after" title="5.33.&#160;Function dispatch_after">dispatch_after</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                          <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                          <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                          <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    // <a class="link" href="#functions.post_after" title="5.34.&#160;Function post_after">post_after</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    // <a class="link" href="#functions.defer_after" title="5.35.&#160;Function defer_after">defer_after</a>:

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                       <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                       <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
      <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                       <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.dispatch_at"></a>5.30.&#160;Function <code class="literal">dispatch_at</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Without blocking the current thread
          of execution, on expiration of the absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code> performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code> followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code>
          by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w1</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w1</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Without blocking the current thread of execution, on expiration of the
          absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code>
          performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">dispatch_at</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.post_at"></a>5.31.&#160;Function <code class="literal">post_at</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
               <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Without blocking the current thread
          of execution, on expiration of the absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code> performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code> followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
               <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code>
          by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w1</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w1</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Without blocking the current thread of execution, on expiration of the
          absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code>
          performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">post</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
               <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">post_at</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.defer_at"></a>5.32.&#160;Function <code class="literal">defer_at</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Without blocking the current thread
          of execution, on expiration of the absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code> performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code> followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">ex</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          Let the type <code class="computeroutput"><span class="identifier">Handler</span></code> be
          the handler function object type determined by performing <code class="computeroutput"><span class="identifier">handler_type_t</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">,</span>
          <span class="keyword">void</span><span class="special">()&gt;</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Requires:</em></span> The type <code class="computeroutput"><span class="identifier">Handler</span></code>
          must satisfy the <code class="computeroutput"><span class="identifier">MoveConstructible</span></code>
          requirements (C++ Std, [moveconstructible]) and be callable with zero arguments.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> <br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">handler</span></code> of type <code class="computeroutput"><span class="identifier">Handler</span></code>,
          initialized with <code class="computeroutput"><span class="identifier">handler</span><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.<br> &#8212; Constructs an object <code class="computeroutput"><span class="identifier">result</span></code> of type <code class="computeroutput"><span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">Handler</span><span class="special">&gt;</span></code>, initializing the object as <code class="computeroutput"><span class="identifier">result</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br>
          &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w</span></code>
          by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex</span><span class="special">)</span></code>.<br>
          &#8212; Obtains the handler's associated executor object <code class="computeroutput"><span class="identifier">ex1</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_executor</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Creates a work object <code class="computeroutput"><span class="identifier">w1</span></code> by performing <code class="computeroutput"><span class="identifier">make_work</span><span class="special">(</span><span class="identifier">ex1</span><span class="special">)</span></code>.<br> &#8212; Obtains the handler's associated
          allocator object <code class="computeroutput"><span class="identifier">alloc</span></code>
          by performing <code class="computeroutput"><span class="identifier">get_associated_allocator</span><span class="special">(</span><span class="identifier">handler</span><span class="special">)</span></code>.<br> &#8212; Constructs a function object <code class="computeroutput"><span class="identifier">f</span></code> with a function call operator that
          performs <code class="computeroutput"><span class="identifier">ex1</span><span class="special">.</span><span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">handler</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w1</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.<br>
          &#8212; Without blocking the current thread of execution, on expiration of the
          absolute timeout specified by <code class="computeroutput"><span class="identifier">abs_time</span></code>
          performs <code class="computeroutput"><span class="identifier">ex</span><span class="special">.</span><span class="identifier">defer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">alloc</span><span class="special">)</span></code>
          followed by <code class="computeroutput"><span class="identifier">w</span><span class="special">.</span><span class="identifier">reset</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">result</span><span class="special">.</span><span class="identifier">get</span><span class="special">()</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_at</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">ctx</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">defer_at</span><span class="special">(</span><span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.dispatch_after"></a>5.33.&#160;Function <code class="literal">dispatch_after</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">dispatch_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">dispatch_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">e</span><span class="special">,</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">dispatch_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">c</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">dispatch_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.post_after"></a>5.34.&#160;Function <code class="literal">post_after</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                  <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">post_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                  <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">post_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">e</span><span class="special">,</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">post_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                  <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">c</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">post_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.defer_after"></a>5.35.&#160;Function <code class="literal">defer_after</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                   <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">defer_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Executor</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">Executor</span><span class="special">&amp;</span> <span class="identifier">e</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">defer_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">e</span><span class="special">,</span>
          <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">Executor</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">ExecutionContext</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">CompletionTokens</span><span class="special">&gt;</span>
  <span class="keyword">auto</span> <span class="identifier">defer_after</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">,</span>
                   <span class="keyword">const</span> <span class="identifier">ExecutionContext</span><span class="special">&amp;</span> <span class="identifier">c</span><span class="special">,</span> <span class="identifier">CompletionTokens</span><span class="special">&amp;&amp;...</span> <span class="identifier">tokens</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">experimental</span><span class="special">::</span>concurrency_v1<span class="special">::</span><span class="identifier">defer_at</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">,</span> <span class="identifier">ctx</span><span class="special">.</span><span class="identifier">get_executor</span><span class="special">(),</span> <span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">CompletionToken</span><span class="special">&gt;(</span><span class="identifier">token</span><span class="special">))</span></code>.
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Remarks:</em></span> This function shall not participate in overload
          resolution unless <code class="computeroutput"><span class="identifier">is_convertible</span><span class="special">&lt;</span><span class="identifier">ExecutionContext</span><span class="special">&amp;,</span> <span class="identifier">execution_context</span><span class="special">&amp;&gt;::</span><span class="identifier">value</span></code>
          is true.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_future___synopsis"></a>5.36.&#160;Header <code class="literal">&lt;experimental/future&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">future</span><span class="special">&gt;</span>

<span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <a class="link" href="#classes.async_result_packaged_task" title="5.37.&#160;Class template specialization async_result for packaged_task">async_result&lt;packaged_task&lt;R(Args...)&gt;&gt;</a><span class="special">;</span>

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <a class="link" href="#classes.packaged_handler" title="5.38.&#160;Class template packaged_handler">packaged_handler</a><span class="special">;</span>

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&gt;;</span>

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
      <span class="keyword">class</span> <a class="link" href="#classes.packaged_token" title="5.39.&#160;Class template packaged_token">packaged_token</a><span class="special">;</span>

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">handler_type</span><span class="special">&lt;</span><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;,</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;;</span>

    <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
      <span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span> <a class="link" href="#functions.package" title="5.40.&#160;Function package">package</a><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">());</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.async_result_packaged_task"></a>5.37.&#160;Class template specialization <code class="literal">async_result</code> for <code class="literal">packaged_task</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;&gt;</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">typedef</span> <span class="identifier">future</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">&gt;</span> <span class="identifier">type</span><span class="special">;</span>

        <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
        <span class="identifier">async_result</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">async_result</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">async_result</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>

        <span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">type</span> <span class="identifier">future_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        The implementation shall provide a specialization of <code class="computeroutput"><span class="identifier">async_result</span></code>
        that meets the <a class="link" href="#classes.async_result" title="5.3.&#160;Class template async_result"><code class="computeroutput"><span class="identifier">async_result</span></code>
        specialization requirements</a>.
      </p><pre class="programlisting"><span class="identifier">async_result</span><span class="special">(</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">R</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;&amp;</span> <span class="identifier">t</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Effects:</em></span> Initializes <code class="computeroutput"><span class="identifier">future_</span></code>
          with <code class="computeroutput"><span class="identifier">t</span><span class="special">.</span><span class="identifier">get_future</span><span class="special">()</span></code>.
        </p></blockquote></div><pre class="programlisting"><span class="identifier">type</span> <span class="identifier">get</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">future_</span><span class="special">)</span></code>.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.packaged_handler"></a>5.38.&#160;Class template <code class="literal">packaged_handler</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">packaged_handler</span>
        <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">&gt;</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// packaged_handler types:</span>

        <span class="keyword">typedef</span> <span class="identifier">Alloc</span> <span class="identifier">allocator_type</span><span class="special">;</span>

        <span class="comment">// packaged_handler constructors:</span>

        <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">&gt;</span>
          <span class="keyword">explicit</span> <span class="identifier">packaged_handler</span><span class="special">(</span><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>

        <span class="comment">// packaged_handler operations:</span>

        <span class="identifier">allocator_type</span> <span class="identifier">get_allocator</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">Alloc</span> <span class="identifier">allocator_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
        <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&gt;;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__packaged_handler__constructors"></a>5.38.1.&#160;<code class="literal">packaged_handler</code> constructors</h4></div></div></div><pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">&gt;</span>
  <span class="keyword">explicit</span> <span class="identifier">packaged_handler</span><span class="special">(</span><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&amp;&amp;</span> <span class="identifier">token</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span>
            <span class="identifier">Alloc</span><span class="special">&gt;</span></code>,
            initializing the base class with <code class="computeroutput"><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">&gt;(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">token</span><span class="special">.</span><span class="identifier">f_</span><span class="special">))</span></code> and initializing <code class="computeroutput"><span class="identifier">allocator_</span></code>
            with <code class="computeroutput"><span class="identifier">token</span><span class="special">.</span><span class="identifier">allocator_</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__packaged_handler__operations"></a>5.38.2.&#160;<code class="literal">packaged_handler</code> operations</h4></div></div></div><pre class="programlisting"><span class="identifier">allocator_type</span> <span class="identifier">get_allocator</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">allocator_</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.async_result_packaged_handler"></a>5.38.3.&#160;Class template specialization <code class="literal">async_result</code></h4></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Signature</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
      <span class="keyword">class</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&gt;</span>
        <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">async_result</span><span class="special">&lt;</span><span class="identifier">packaged_task</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">&gt;&gt;</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&amp;</span> <span class="identifier">h</span><span class="special">);</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
          The implementation shall provide a specialization of <code class="computeroutput"><span class="identifier">async_result</span></code>
          that meets the <a class="link" href="#classes.async_result" title="5.3.&#160;Class template async_result"><code class="computeroutput"><span class="identifier">async_result</span></code>
          specialization requirements</a>.
        </p><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">async_result</span><span class="special">(</span><span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">Signature</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;&amp;</span> <span class="identifier">h</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Initializes the base class with <code class="computeroutput"><span class="identifier">h</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.packaged_token"></a>5.39.&#160;Class template <code class="literal">packaged_token</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
      <span class="keyword">class</span> <span class="identifier">packaged_token</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// packaged_token types:</span>

        <span class="keyword">typedef</span> <span class="identifier">Alloc</span> <span class="identifier">allocator_type</span><span class="special">;</span>

        <span class="comment">// packaged_token constructors:</span>

        <span class="keyword">explicit</span> <span class="identifier">packaged_token</span><span class="special">(</span><span class="identifier">Func</span> <span class="identifier">f</span><span class="special">);</span>
        <span class="identifier">packaged_token</span><span class="special">(</span><span class="identifier">Func</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>

        <span class="comment">// packaged_token operations:</span>

        <span class="identifier">allocator_type</span> <span class="identifier">get_allocator</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">private</span><span class="special">:</span>
        <span class="identifier">Func</span> <span class="identifier">f_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
        <span class="identifier">Alloc</span> <span class="identifier">allocator_</span><span class="special">;</span> <span class="comment">// <span class="emphasis"><em>exposition only</em></span></span>
      <span class="special">};</span>

      <span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span><span class="special">...</span> <span class="identifier">Args</span><span class="special">&gt;</span>
      <span class="keyword">struct</span> <span class="identifier">handler_type</span><span class="special">&lt;</span><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;,</span> <span class="identifier">R</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;</span>
      <span class="special">{</span>
        <span class="keyword">typedef</span> <span class="identifier">packaged_handler</span><span class="special">&lt;</span><span class="identifier">result_of_t</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">(</span><span class="identifier">Args</span><span class="special">...)&gt;(</span><span class="identifier">Args</span><span class="special">...),</span> <span class="identifier">Alloc</span><span class="special">&gt;</span> <span class="identifier">type</span><span class="special">;</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__packaged_token__constructors"></a>5.39.1.&#160;<code class="literal">packaged_token</code> constructors</h4></div></div></div><pre class="programlisting"><span class="keyword">explicit</span> <span class="identifier">packaged_token</span><span class="special">(</span><span class="identifier">Func</span> <span class="identifier">f</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span></code>,
            initializing <code class="computeroutput"><span class="identifier">f_</span></code> with
            <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">)</span></code>
            and default constructing <code class="computeroutput"><span class="identifier">allocator_</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">packaged_token</span><span class="special">(</span><span class="identifier">Func</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span></code>,
            initializing <code class="computeroutput"><span class="identifier">f_</span></code> with
            <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">move</span><span class="special">(</span><span class="identifier">f</span><span class="special">)</span></code>
            and <code class="computeroutput"><span class="identifier">allocator_</span></code> with
            <code class="computeroutput"><span class="identifier">a</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__packaged_token__operations"></a>5.39.2.&#160;<code class="literal">packaged_token</code> operations</h4></div></div></div><pre class="programlisting"><span class="identifier">allocator_type</span> <span class="identifier">get_allocator</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">allocator_</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="functions.package"></a>5.40.&#160;Function <code class="literal">package</code></h3></div></div></div><pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span> <span class="special">=</span> <span class="identifier">allocator</span><span class="special">&lt;</span><span class="keyword">void</span><span class="special">&gt;&gt;</span>
  <span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;</span> <span class="identifier">package</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span> <span class="special">=</span> <span class="identifier">Alloc</span><span class="special">());</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">packaged_token</span><span class="special">&lt;</span><span class="identifier">decay_t</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;,</span> <span class="identifier">Alloc</span><span class="special">&gt;(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">),</span> <span class="identifier">a</span><span class="special">)</span></code>.
        </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_thread_pool___synopsis"></a>5.41.&#160;Header <code class="literal">&lt;experimental/thread_pool&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <a class="link" href="#classes.thread_pool" title="5.42.&#160;Class thread_pool">thread_pool</a><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.thread_pool"></a>5.42.&#160;Class <code class="literal">thread_pool</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">thread_pool</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">execution_context</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// types:</span>

        <span class="keyword">class</span> <a class="link" href="#classes.thread_pool__executor_type" title="5.43.&#160;Class thread_pool::executor_type">executor_type</a><span class="special">;</span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">thread_pool</span><span class="special">();</span>
        <span class="keyword">explicit</span> <span class="identifier">thread_pool</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">num_threads</span><span class="special">);</span>
        <span class="identifier">thread_pool</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">thread_pool</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="special">~</span><span class="identifier">thread_pool</span><span class="special">();</span>

        <span class="comment">// thread_pool operations:</span>

        <span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">stop</span><span class="special">();</span>

        <span class="keyword">void</span> <span class="identifier">join</span><span class="special">();</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        Class <code class="computeroutput"><span class="identifier">thread_pool</span></code> implements
        a fixed-size pool of threads.
      </p><p>
        An object of type <code class="computeroutput"><span class="identifier">thread_pool</span></code>
        has an associated executor object, meeting the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor
        type requirements</a>, of type <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code>
        and obtainable via the <code class="computeroutput"><span class="identifier">thread_pool</span></code>
        object's <code class="computeroutput"><span class="identifier">get_executor</span></code> member
        function.
      </p><p>
        For an object of type <code class="computeroutput"><span class="identifier">thread_pool</span></code>,
        <span class="emphasis"><em>outstanding work</em></span> is defined as the sum of:
      </p><p>
        &#8212; the total number of calls to the <code class="computeroutput"><span class="identifier">thread_pool</span></code>
        executor's <code class="computeroutput"><span class="identifier">on_work_started</span></code>
        function, less the total number of calls to the <code class="computeroutput"><span class="identifier">on_work_finished</span></code>
        function;
      </p><p>
        &#8212; the number of function objects that have been added to the <code class="computeroutput"><span class="identifier">thread_pool</span></code> via the <code class="computeroutput"><span class="identifier">thread_pool</span></code>
        executor, but not yet executed; and
      </p><p>
        &#8212; the number of function objects that are currently being executed by the
        <code class="computeroutput"><span class="identifier">thread_pool</span></code>.
      </p><p>
        The <code class="computeroutput"><span class="identifier">thread_pool</span></code> member functions
        <code class="computeroutput"><span class="identifier">get_executor</span></code>, <code class="computeroutput"><span class="identifier">stop</span></code>, and <code class="computeroutput"><span class="identifier">join</span></code>,
        and the <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code> copy constructors, member
        functions and comparison operators, shall not introduce data races as a result
        of concurrent calls to those functions from different threads.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__constructors_destructor"></a>5.42.1.&#160;<code class="literal">thread_pool</code> constructors/destructor</h4></div></div></div><pre class="programlisting"><span class="identifier">thread_pool</span><span class="special">();</span>
<span class="keyword">explicit</span> <span class="identifier">thread_pool</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">num_threads</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Creates an object of class <code class="computeroutput"><span class="identifier">thread_pool</span></code> containing a number of
            threads of execution, each represented by a <code class="computeroutput"><span class="identifier">thread</span></code>
            object. If specified, the number of threads in the pool is <code class="computeroutput"><span class="identifier">num_threads</span></code>. Otherwise, the number
            of threads in the pool is implementation-defined. [<span class="emphasis"><em>Note:</em></span>
            A suggested value for the implementation-defined number of threads is
            <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">thread</span><span class="special">::</span><span class="identifier">hardware_concurrency</span><span class="special">()</span>
            <span class="special">*</span> <span class="number">2</span></code>.
            &#8212;<span class="emphasis"><em>end note</em></span>]
          </p></blockquote></div><pre class="programlisting"><span class="special">~</span><span class="identifier">thread_pool</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Destroys an object of class <code class="computeroutput"><span class="identifier">thread_pool</span></code>. Performs <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>
            followed by <code class="computeroutput"><span class="identifier">join</span><span class="special">()</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__members"></a>5.42.2.&#160;<code class="literal">thread_pool</code> members</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> An executor that may be used for submitting
            function objects to the <code class="computeroutput"><span class="identifier">thread_pool</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">stop</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Signals the threads in the pool to complete
            as soon as possible. If a thread is currently executing a function object,
            the thread will exit only after completion of that function object. The
            call to <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>
            returns without waiting for the threads to complete.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">join</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If not already stopped, signals the threads
            in the pool to exit once the outstanding work is <code class="computeroutput"><span class="number">0</span></code>.
            Blocks until all threads in the pool have completed.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Synchronization:</em></span> The completion of each thread in
            the pool synchronizes with (C++ Std, [intro.multithread]) the corresponding
            successful <code class="computeroutput"><span class="identifier">join</span><span class="special">()</span></code>
            return.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> The threads in the pool represented
            by <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>
            have completed.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.thread_pool__executor_type"></a>5.43.&#160;Class <code class="literal">thread_pool::executor_type</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">executor_type</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_type</span><span class="special">(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="special">~</span><span class="identifier">executor_type</span><span class="special">();</span>

        <span class="comment">// executor operations:</span>

        <span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">thread_pool</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
      <span class="special">};</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code> is a type satisfying <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>. Objects of
        type <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code> are associated with a <code class="computeroutput"><span class="identifier">thread_pool</span></code>, and function objects submitted
        using the <code class="computeroutput"><span class="identifier">dispatch</span></code>, <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>
        member functions will be executed by the <code class="computeroutput"><span class="identifier">thread_pool</span></code>.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__executor_type__constructors"></a>5.43.1.&#160;<code class="literal">thread_pool::executor_type</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__executor_type__assignment"></a>5.43.2.&#160;<code class="literal">thread_pool::executor_type</code> assignment</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__executor_type__operations"></a>5.43.3.&#160;<code class="literal">thread_pool::executor_type</code> operations</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>
            if the current thread of execution is a member of the pool; otherwise
            <code class="computeroutput"><span class="keyword">false</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">thread_pool</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> A reference to the associated <code class="computeroutput"><span class="identifier">thread_pool</span></code> object.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Increases the count of outstanding work
            associated with the <code class="computeroutput"><span class="identifier">thread_pool</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Decreases the count of outstanding work
            associated with the <code class="computeroutput"><span class="identifier">thread_pool</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">running_in_this_thread</span><span class="special">()</span></code> is true, calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code>. Otherwise, requests execution of
            <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If <code class="computeroutput"><span class="identifier">f</span></code> exits via an exception,
            and the execution of <code class="computeroutput"><span class="identifier">f</span></code>
            is performed in the current thread and before <code class="computeroutput"><span class="identifier">dispatch</span></code>
            returns, the exception shall propagate to the caller of <code class="computeroutput"><span class="identifier">dispatch</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests execution of <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests execution of <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__thread_pool__executor_type__comparisons"></a>5.43.4.&#160;<code class="literal">thread_pool::executor_type</code> comparisons</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">&amp;</span><span class="identifier">a</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span>
            <span class="special">==</span> <span class="special">&amp;</span><span class="identifier">b</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">thread_pool</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">!(</span><span class="identifier">a</span> <span class="special">==</span> <span class="identifier">b</span><span class="special">)</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="headers.header____experimental_loop_scheduler___synopsis"></a>5.44.&#160;Header <code class="literal">&lt;experimental/loop_scheduler&gt;</code> synopsis</h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <a class="link" href="#classes.loop_scheduler" title="5.45.&#160;Class loop_scheduler">loop_scheduler</a><span class="special">;</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.loop_scheduler"></a>5.45.&#160;Class <code class="literal">loop_scheduler</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">loop_scheduler</span> <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">execution_context</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// types:</span>

        <span class="keyword">class</span> <a class="link" href="#classes.loop_scheduler__executor_type" title="5.46.&#160;Class loop_scheduler::executor_type">executor_type</a><span class="special">;</span>

        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">loop_scheduler</span><span class="special">();</span>
        <span class="keyword">explicit</span> <span class="identifier">loop_scheduler</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">concurrency_hint</span><span class="special">);</span>
        <span class="identifier">loop_scheduler</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="identifier">loop_scheduler</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">&amp;)</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
        <span class="special">~</span><span class="identifier">loop_scheduler</span><span class="special">();</span>

        <span class="comment">// loop_scheduler operations:</span>

        <span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">size_t</span> <span class="identifier">run</span><span class="special">();</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
          <span class="identifier">size_t</span> <span class="identifier">run_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
          <span class="identifier">size_t</span> <span class="identifier">run_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">);</span>

        <span class="identifier">size_t</span> <span class="identifier">run_one</span><span class="special">();</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
          <span class="identifier">size_t</span> <span class="identifier">run_one_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
          <span class="identifier">size_t</span> <span class="identifier">run_one_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">);</span>

        <span class="identifier">size_t</span> <span class="identifier">poll</span><span class="special">();</span>

        <span class="identifier">size_t</span> <span class="identifier">poll_one</span><span class="special">();</span>

        <span class="keyword">void</span> <span class="identifier">stop</span><span class="special">();</span>

        <span class="keyword">bool</span> <span class="identifier">stopped</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">restart</span><span class="special">();</span>
      <span class="special">};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        An object of type <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
        has an associated executor object, meeting the <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor
        type requirements</a>, of type <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code>
        and obtainable via the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
        object's <code class="computeroutput"><span class="identifier">get_executor</span></code> member
        function.
      </p><p>
        For an object of type <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>,
        <span class="emphasis"><em>outstanding work</em></span> is defined as the sum of:
      </p><p>
        &#8212; the total number of calls to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
        executor's <code class="computeroutput"><span class="identifier">on_work_started</span></code>
        function, less the total number of calls to the <code class="computeroutput"><span class="identifier">on_work_finished</span></code>
        function;
      </p><p>
        &#8212; the number of function objects that have been added to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code> via the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
        executor, but not yet executed; and
      </p><p>
        &#8212; the number of function objects that are currently being executed by the
        <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
      </p><p>
        If at any time the outstanding work falls to <code class="computeroutput"><span class="number">0</span></code>,
        the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code> is stopped
        as if by <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>.
      </p><p>
        The <code class="computeroutput"><span class="identifier">loop_scheduler</span></code> member
        functions <code class="computeroutput"><span class="identifier">get_executor</span></code>,
        <code class="computeroutput"><span class="identifier">run</span></code>, <code class="computeroutput"><span class="identifier">run_for</span></code>,
        <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>, <code class="computeroutput"><span class="identifier">run_one_for</span></code>,
        <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>, <code class="computeroutput"><span class="identifier">poll_one</span></code>,
        <code class="computeroutput"><span class="identifier">stop</span></code>, and <code class="computeroutput"><span class="identifier">stopped</span></code>,
        and the <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code> copy constructors, member
        functions and comparison operators, shall not introduce data races as a result
        of concurrent calls to those functions from different threads. [<span class="emphasis"><em>Note:</em></span>
        The <code class="computeroutput"><span class="identifier">restart</span></code> member function
        is excluded from these thread safety requirements. &#8212;<span class="emphasis"><em>end note</em></span>]
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__constructors_destructor"></a>5.45.1.&#160;<code class="literal">loop_scheduler</code> constructors/destructor</h4></div></div></div><pre class="programlisting"><span class="identifier">loop_scheduler</span><span class="special">();</span>
<span class="keyword">explicit</span> <span class="identifier">loop_scheduler</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">concurrency_hint</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Creates an object of class <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Remarks:</em></span> The <code class="computeroutput"><span class="identifier">concurrency_hint</span></code>
            parameter is a suggestion to the implementation on the number of threads
            that should process asynchronous operations and execute function objects.
          </p></blockquote></div><pre class="programlisting"><span class="special">~</span><span class="identifier">loop_scheduler</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Destroys an object of class <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__members"></a>5.45.2.&#160;<code class="literal">loop_scheduler</code> members</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span> <span class="identifier">get_executor</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> An executor that may be used for submitting
            function objects to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">run</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> Must not be called from a thread that
            is currently calling one of <code class="computeroutput"><span class="identifier">run</span></code>,
            <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>,
            or <code class="computeroutput"><span class="identifier">poll_one</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to: 
</p><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
<span class="keyword">while</span> <span class="special">(</span><span class="identifier">run_one</span><span class="special">())</span>
  <span class="keyword">if</span> <span class="special">(</span><span class="identifier">n</span> <span class="special">!=</span> <span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">max</span><span class="special">())</span>
    <span class="special">++</span><span class="identifier">n</span><span class="special">;</span>
</pre><p>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">n</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
  <span class="identifier">size_t</span> <span class="identifier">run_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to: 
</p><pre class="programlisting"><span class="keyword">return</span> <span class="identifier">run_until</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">);</span>
</pre><p>
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="identifier">size_t</span> <span class="identifier">run_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to: 
</p><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
<span class="keyword">while</span> <span class="special">(</span><span class="identifier">run_one_until</span><span class="special">(</span><span class="identifier">abs_time</span><span class="special">))</span>
  <span class="keyword">if</span> <span class="special">(</span><span class="identifier">n</span> <span class="special">!=</span> <span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">max</span><span class="special">())</span>
    <span class="special">++</span><span class="identifier">n</span><span class="special">;</span>
</pre><p>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">n</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">run_one</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Requires:</em></span> Must not be called from a thread that
            is currently calling one of <code class="computeroutput"><span class="identifier">run</span></code>,
            <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>,
            or <code class="computeroutput"><span class="identifier">poll_one</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            object has no oustanding work, performs <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>. Otherwise, blocks while the loop_scheduler
            has outstanding work, or until the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            is stopped, or until one function object has been executed.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If an executed function object throws an exception, the exception shall
            be allowed to propagate to the caller of <code class="computeroutput"><span class="identifier">run_one</span><span class="special">()</span></code>. The <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            state shall be as if the function object had returned normally.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="number">1</span></code>
            if a function object was executed, otherwise <code class="computeroutput"><span class="number">0</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Notes:</em></span> This function may invoke additional handlers
            through nested calls to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            executor's <code class="computeroutput"><span class="identifier">dispatch</span></code> member
            function. These do not count towards the return value.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Rep</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Period</span><span class="special">&gt;</span>
  <span class="identifier">size_t</span> <span class="identifier">run_one_for</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">duration</span><span class="special">&lt;</span><span class="identifier">Rep</span><span class="special">,</span> <span class="identifier">Period</span><span class="special">&gt;&amp;</span> <span class="identifier">rel_time</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to: 
</p><pre class="programlisting"><span class="keyword">return</span> <span class="identifier">run_until</span><span class="special">(</span><span class="identifier">chrono</span><span class="special">::</span><span class="identifier">steady_clock</span><span class="special">::</span><span class="identifier">now</span><span class="special">()</span> <span class="special">+</span> <span class="identifier">rel_time</span><span class="special">);</span>
</pre><p>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="number">1</span></code>
            if a function object was executed, otherwise <code class="computeroutput"><span class="number">0</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Clock</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Duration</span><span class="special">&gt;</span>
  <span class="identifier">size_t</span> <span class="identifier">run_one_until</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">chrono</span><span class="special">::</span><span class="identifier">time_point</span><span class="special">&lt;</span><span class="identifier">Clock</span><span class="special">,</span> <span class="identifier">Duration</span><span class="special">&gt;&amp;</span> <span class="identifier">abs_time</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            object has no oustanding work, performs <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>. Otherwise, blocks while the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code> has outstanding work,
            or until the expiration of the absolute timeout (C++ Std, [thread.req.timing])
            specified by <code class="computeroutput"><span class="identifier">abs_time</span></code>,
            or until the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            is stopped, or until one function object has been executed.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If an executed function object throws an exception, the exception shall
            be allowed to propagate to the caller of <code class="computeroutput"><span class="identifier">run_one</span><span class="special">()</span></code>. The <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            state shall be as if the function object had returned normally.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="number">1</span></code>
            if a function object was executed, otherwise <code class="computeroutput"><span class="number">0</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Notes:</em></span> This function may invoke additional handlers
            through nested calls to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            executor's <code class="computeroutput"><span class="identifier">dispatch</span></code> member
            function. These do not count towards the return value.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">poll</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Equivalent to: 
</p><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">n</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
<span class="keyword">while</span> <span class="special">(</span><span class="identifier">poll_one</span><span class="special">())</span>
  <span class="keyword">if</span> <span class="special">(</span><span class="identifier">n</span> <span class="special">!=</span> <span class="identifier">numeric_limits</span><span class="special">&lt;</span><span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">max</span><span class="special">())</span>
    <span class="special">++</span><span class="identifier">n</span><span class="special">;</span>
</pre><p>
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="identifier">n</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">size_t</span> <span class="identifier">poll_one</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            object has no oustanding work, performs <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code>. Otherwise, if there is a function
            object ready for immediate execution, executes it.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If an executed function object throws an exception, the exception shall
            be allowed to propagate to the caller of <code class="computeroutput"><span class="identifier">poll_one</span><span class="special">()</span></code>. The <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            state shall be as if the function object had returned normally.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="number">1</span></code>
            if a handler was executed, otherwise <code class="computeroutput"><span class="number">0</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Notes:</em></span> This function may invoke additional handlers
            through nested calls to the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            executor's <code class="computeroutput"><span class="identifier">dispatch</span></code> member
            function. These do not count towards the return value.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">stop</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Stops the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
            Concurrent calls to <code class="computeroutput"><span class="identifier">run</span></code>,
            <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>
            or <code class="computeroutput"><span class="identifier">poll_one</span></code> will end
            as soon as possible. If a call to <code class="computeroutput"><span class="identifier">run</span></code>,
            <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>
            or <code class="computeroutput"><span class="identifier">poll_one</span></code> is currently
            executing a function object, the call will end only after completion
            of that function object. The call to <code class="computeroutput"><span class="identifier">stop</span><span class="special">()</span></code> returns without waiting for concurrent
            calls to <code class="computeroutput"><span class="identifier">run</span></code>, <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>,
            <code class="computeroutput"><span class="identifier">run_one</span></code>, <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>,
            <code class="computeroutput"><span class="identifier">poll</span></code> or <code class="computeroutput"><span class="identifier">poll_one</span></code> to complete.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">stopped</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">true</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            [<span class="emphasis"><em>Note:</em></span> When <code class="computeroutput"><span class="identifier">stopped</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">true</span></code>, subsequent calls to <code class="computeroutput"><span class="identifier">run</span></code>, <code class="computeroutput"><span class="identifier">run_for</span></code>,
            <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>, <code class="computeroutput"><span class="identifier">run_one_for</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code> or <code class="computeroutput"><span class="identifier">poll_one</span></code>
            will exit immediately with a return value of <code class="computeroutput"><span class="number">0</span></code>,
            without executing any function objects. A <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            remains in the stopped state until a call to <code class="computeroutput"><span class="identifier">restart</span><span class="special">()</span></code>. &#8212;<span class="emphasis"><em>end note</em></span>]
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">restart</span><span class="special">();</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="identifier">stopped</span><span class="special">()</span> <span class="special">==</span> <span class="keyword">false</span></code>.
          </p></blockquote></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="classes.loop_scheduler__executor_type"></a>5.46.&#160;Class <code class="literal">loop_scheduler::executor_type</code></h3></div></div></div><pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">std</span> <span class="special">{</span>
  <span class="keyword">namespace</span> <span class="identifier">experimental</span> <span class="special">{</span>
    inline namespace concurrency_v1 {

      <span class="keyword">class</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span>
      <span class="special">{</span>
      <span class="keyword">public</span><span class="special">:</span>
        <span class="comment">// construct / copy / destroy:</span>

        <span class="identifier">executor_type</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_type</span><span class="special">(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="special">~</span><span class="identifier">executor_type</span><span class="special">();</span>

        <span class="comment">// executor operations:</span>

        <span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="identifier">loop_scheduler</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
        <span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>

        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
        <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
          <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
      <span class="special">};</span>

      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
      <span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                      <span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>

      <span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">is_executor</span><span class="special">&lt;</span><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&gt;</span> <span class="special">:</span> <span class="identifier">true_type</span> <span class="special">{};</span>

    } // inline namespace concurrency_v1
  <span class="special">}</span> <span class="comment">// namespace experimental</span>
<span class="special">}</span> <span class="comment">// namespace std</span>
</pre><p>
        <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code> is a type satisfying <a class="link" href="#requirements.executor" title="5.9.1.&#160;Executor requirements">Executor requirements</a>. Objects of
        type <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code> are associated with a <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>, and function objects submitted
        using the <code class="computeroutput"><span class="identifier">dispatch</span></code>, <code class="computeroutput"><span class="identifier">post</span></code> or <code class="computeroutput"><span class="identifier">defer</span></code>
        member functions will be executed by the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
        from within the <code class="computeroutput"><span class="identifier">run</span></code>, <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>,
        <code class="computeroutput"><span class="identifier">run_one</span></code>, <code class="computeroutput"><span class="identifier">run_one_for</span></code>,
        <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code> or <code class="computeroutput"><span class="identifier">poll_one</span></code>
        functions.
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__executor_type__constructors"></a>5.46.1.&#160;<code class="literal">loop_scheduler::executor_type</code> constructors</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Constructs an object of class <code class="computeroutput"><span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__executor_type__assignment"></a>5.46.2.&#160;<code class="literal">loop_scheduler::executor_type</code> assignment</h4></div></div></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">const</span> <span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span> <span class="special">==</span> <span class="identifier">other</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">executor_type</span><span class="special">&amp;&amp;</span> <span class="identifier">other</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Postconditions:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code> is equal to the prior value of <code class="computeroutput"><span class="identifier">other</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">*</span><span class="keyword">this</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__executor_type__operations"></a>5.46.3.&#160;<code class="literal">loop_scheduler::executor_type</code> operations</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="identifier">running_in_this_thread</span><span class="special">()</span> <span class="keyword">const</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="keyword">true</span></code>
            if the current thread of execution is invoking the <code class="computeroutput"><span class="identifier">run</span></code>,
            <code class="computeroutput"><span class="identifier">run_for</span></code>, <code class="computeroutput"><span class="identifier">run_until</span></code>, <code class="computeroutput"><span class="identifier">run_one</span></code>,
            <code class="computeroutput"><span class="identifier">run_one_for</span></code>, <code class="computeroutput"><span class="identifier">run_one_until</span></code>, <code class="computeroutput"><span class="identifier">poll</span></code>
            or <code class="computeroutput"><span class="identifier">poll_one</span></code> function
            of the associated <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>
            object.
          </p></blockquote></div><pre class="programlisting"><span class="identifier">loop_scheduler</span><span class="special">&amp;</span> <span class="identifier">context</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> A reference to the associated <code class="computeroutput"><span class="identifier">loop_scheduler</span></code> object.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_started</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Increases the count of outstanding work
            associated with the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">void</span> <span class="identifier">on_work_finished</span><span class="special">()</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Decreases the count of outstanding work
            associated with the <code class="computeroutput"><span class="identifier">loop_scheduler</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">dispatch</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> If <code class="computeroutput"><span class="identifier">running_in_this_thread</span><span class="special">()</span></code> is true, calls <code class="literal"><span class="emphasis"><em>DECAY_COPY</em></span></code><code class="computeroutput"><span class="special">(</span><span class="identifier">forward</span><span class="special">&lt;</span><span class="identifier">Func</span><span class="special">&gt;(</span><span class="identifier">f</span><span class="special">))()</span></code>. Otherwise, requests execution of
            <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
            If <code class="computeroutput"><span class="identifier">f</span></code> exits via an exception,
            and the execution of <code class="computeroutput"><span class="identifier">f</span></code>
            is performed in the current thread and before <code class="computeroutput"><span class="identifier">dispatch</span></code>
            returns, the exception shall propagate to the caller of <code class="computeroutput"><span class="identifier">dispatch</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">post</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests execution of <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Func</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Alloc</span><span class="special">&gt;</span>
  <span class="keyword">void</span> <span class="identifier">defer</span><span class="special">(</span><span class="identifier">Func</span><span class="special">&amp;&amp;</span> <span class="identifier">f</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">Alloc</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">);</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Effects:</em></span> Requests execution of <code class="computeroutput"><span class="identifier">f</span></code>.
          </p></blockquote></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="classes.__loop_scheduler__executor_type__comparisons"></a>5.46.4.&#160;<code class="literal">loop_scheduler::executor_type</code> comparisons</h4></div></div></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">==(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">&amp;</span><span class="identifier">a</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span>
            <span class="special">==</span> <span class="special">&amp;</span><span class="identifier">b</span><span class="special">.</span><span class="identifier">context</span><span class="special">()</span></code>.
          </p></blockquote></div><pre class="programlisting"><span class="keyword">bool</span> <span class="keyword">operator</span><span class="special">!=(</span><span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span>
                <span class="keyword">const</span> <span class="identifier">loop_scheduler</span><span class="special">::</span><span class="identifier">executor_type</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="identifier">noexcept</span><span class="special">;</span>
</pre><div class="blockquote"><blockquote class="blockquote"><p>
            <span class="emphasis"><em>Returns:</em></span> <code class="computeroutput"><span class="special">!(</span><span class="identifier">a</span> <span class="special">==</span> <span class="identifier">b</span><span class="special">)</span></code>.
          </p></blockquote></div></div></div></div></div></body></html>
